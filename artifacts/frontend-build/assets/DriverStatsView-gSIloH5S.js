import{H as C,r as g,l as h,d as x,k as T,o as m,c as y,e,g as B,I as L,h as w,t as v,F as A,n as V,D as M}from"./index-BIUjLROW.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const I=C("driver",()=>{const u=g([]),d=g(null),p=g([]),o=g(!1),t=g(null);async function D(){var n,i;o.value=!0,t.value=null;try{u.value=await h.getDrivers()}catch(r){throw t.value=((i=(n=r.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to fetch drivers",r}finally{o.value=!1}}async function c(n){var i,r;o.value=!0,t.value=null;try{return d.value=await h.getDriver(n),d.value}catch(l){throw t.value=((r=(i=l.response)==null?void 0:i.data)==null?void 0:r.message)||"Failed to fetch driver",l}finally{o.value=!1}}async function s(n=!1){var i,r;o.value=!0,t.value=null;try{return p.value=await h.getDriverStats(n),p.value}catch(l){throw t.value=((r=(i=l.response)==null?void 0:i.data)==null?void 0:r.message)||"Failed to fetch driver stats",l}finally{o.value=!1}}async function a(n){var i,r;o.value=!0,t.value=null;try{const l=await h.createDriver(n);return u.value.push(l),l}catch(l){throw t.value=((r=(i=l.response)==null?void 0:i.data)==null?void 0:r.message)||"Failed to create driver",l}finally{o.value=!1}}async function S(n,i){var r,l,f;o.value=!0,t.value=null;try{const _=await h.updateDriver(n,i),F=u.value.findIndex(k=>k.id===n);return F!==-1&&(u.value[F]=_),((r=d.value)==null?void 0:r.id)===n&&(d.value=_),_}catch(_){throw t.value=((f=(l=_.response)==null?void 0:l.data)==null?void 0:f.message)||"Failed to update driver",_}finally{o.value=!1}}async function b(n){var i,r,l;o.value=!0,t.value=null;try{await h.deleteDriver(n),u.value=u.value.filter(f=>f.id!==n),((i=d.value)==null?void 0:i.id)===n&&(d.value=null)}catch(f){throw t.value=((l=(r=f.response)==null?void 0:r.data)==null?void 0:l.message)||"Failed to delete driver",f}finally{o.value=!1}}return{drivers:u,currentDriver:d,driverStats:p,loading:o,error:t,fetchDrivers:D,fetchDriver:c,fetchDriverStats:s,createDriver:a,updateDriver:S,deleteDriver:b}}),N={class:"driver-stats"},$={class:"page-header"},O={class:"filter-controls"},z={class:"filter-toggle"},H={key:0,class:"loading"},U={key:1,class:"error"},Y={key:2,class:"stats-grid"},j={class:"stat-row"},q={class:"value"},G={class:"stat-row"},J={class:"value"},K={class:"stat-row"},P={class:"value"},Q={class:"stat-row highlight"},R={class:"value"},W={class:"stat-row"},X={class:"value small"},Z={class:"stat-row"},ee={class:"value"},se={class:"stat-row"},ae={class:"value"},te={class:"stat-row total"},re={class:"value"},le=x({__name:"DriverStatsView",setup(u){const d=I(),p=g(!1),o=async()=>{await d.fetchDriverStats(p.value)};T(async()=>{await o()});function t(c){if(c===null)return"N/A";const s=Math.floor(c/60),a=(c%60).toFixed(3);return s>0?`${s}:${a.padStart(6,"0")}`:`${a}s`}function D(c){const s=["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40"];return s[(c-1)%s.length]||s[0]}return(c,s)=>(m(),y("div",N,[e("header",$,[s[2]||(s[2]=e("div",null,[e("h1",null,"ðŸ“Š Driver Statistics"),e("p",null,"Your complete performance analysis")],-1)),e("div",O,[e("label",z,[B(e("input",{type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=a=>p.value=a),onChange:o},null,544),[[L,p.value]]),s[1]||(s[1]=e("span",null,"Friends Only",-1))])])]),w(d).loading?(m(),y("div",H," Loading driver statistics... ")):w(d).error?(m(),y("div",U,v(w(d).error),1)):(m(),y("div",Y,[(m(!0),y(A,null,V(w(d).driverStats,a=>(m(),y("div",{key:a.driver_id,class:"stat-card"},[e("div",{class:"driver-header",style:M({borderLeftColor:D(a.driver_id)})},[e("h3",null,v(a.driver_name),1)],4),e("div",j,[s[3]||(s[3]=e("span",{class:"label"},"Total Laps:",-1)),e("span",q,v(a.total_laps),1)]),e("div",G,[s[4]||(s[4]=e("span",{class:"label"},"Sessions:",-1)),e("span",J,v(a.total_sessions),1)]),e("div",K,[s[5]||(s[5]=e("span",{class:"label"},"Tracks Visited:",-1)),e("span",P,v(a.total_tracks),1)]),e("div",Q,[s[6]||(s[6]=e("span",{class:"label"},"Best Lap:",-1)),e("span",R,v(t(a.best_lap_time)),1)]),e("div",W,[s[7]||(s[7]=e("span",{class:"label"},"Track:",-1)),e("span",X,v(a.best_lap_track||"N/A"),1)]),e("div",Z,[s[8]||(s[8]=e("span",{class:"label"},"Average Time:",-1)),e("span",ee,v(t(a.average_lap_time)),1)]),e("div",se,[s[9]||(s[9]=e("span",{class:"label"},"Median Time:",-1)),e("span",ae,v(t(a.median_lap_time)),1)]),e("div",te,[s[10]||(s[10]=e("span",{class:"label"},"Total Cost:",-1)),e("span",re,"â‚¬"+v(a.total_cost.toFixed(2)),1)])]))),128))])),s[11]||(s[11]=e("div",{class:"coming-soon"},[e("h2",null,"ðŸ“ˆ Advanced Charts Coming Soon"),e("p",null,"Lap time progression, performance distribution, track comparisons, and more!")],-1))]))}}),ie=E(le,[["__scopeId","data-v-4c51a197"]]);export{ie as default};
