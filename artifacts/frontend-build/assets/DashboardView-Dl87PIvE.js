import{d as $,a as G,j as H,u as O,k as j,l as K,m as w,o as r,c,e as a,b as W,t as n,i as g,F as b,n as _,p as v,q as m,s as u,x as Y,r as M,y as i,z as q}from"./index-BIUjLROW.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"dashboard-container"},Q={class:"user-card"},X={class:"user-avatar"},Z={class:"user-info"},aa={class:"user-name"},sa={class:"user-role"},ta={key:0,class:"auth-warning"},ea={class:"navigation"},na={class:"nav-section"},oa={class:"nav-icon"},ia={class:"nav-label"},la={class:"nav-section"},ra={class:"nav-icon"},ca={class:"nav-label"},da={key:0,class:"nav-section"},ua={class:"nav-icon"},pa={class:"nav-label"},va={class:"version-display"},ma={class:"data-points-display"},ha={class:"main-content"},ga={class:"top-bar"},ba={class:"page-title-section"},_a={class:"page-subtitle"},fa={class:"page-content"},ya=$({__name:"ModernDashboardLayout",setup(D){const l=G(),h=H(),p=O(),d=M(!1),f=M(0),A=i(()=>{const t=new Date,s=t.getFullYear(),o=String(t.getMonth()+1).padStart(2,"0"),e=String(t.getDate()).padStart(2,"0"),B=String(t.getHours()).padStart(2,"0"),R=String(t.getMinutes()).padStart(2,"0"),z=String(t.getSeconds()).padStart(2,"0");return`${s}${o}${e}${B}${R}${z}`}),T=i(()=>{const t=f.value;return t>=1e6?`${(t/1e6).toFixed(2)}M data points`:t>=1e3?`${(t/1e3).toFixed(1)}K data points`:`${t} data points`});j(async()=>{try{const t=await K.getDatabaseMetrics();f.value=t.total_data_points||0}catch(t){console.error("Failed to fetch database metrics:",t)}});const y=[{path:"/home",label:"Home",icon:"ğŸ "},{path:"/driver-stats",label:"Driver Stats",icon:"ğŸ‘¤"},{path:"/geographic",label:"Geographic",icon:"ğŸ—ºï¸"},{path:"/session-analysis",label:"Sessions",icon:"ğŸ“Š"},{path:"/temporal",label:"Temporal",icon:"ğŸ“ˆ"},{path:"/track-performance",label:"Tracks",icon:"ğŸ"},{path:"/battles",label:"Battles",icon:"âš”ï¸"},{path:"/financial",label:"Financial",icon:"ğŸ’°"},{path:"/predictive",label:"Predictive",icon:"ğŸ”®"}],S=[{path:"/settings",label:"Settings",icon:"âš™ï¸"}],k=[{path:"/admin/data",label:"Database Overview",icon:"ğŸ“Š"},{path:"/admin/tracks",label:"Track Management",icon:"ğŸ"},{path:"/admin/users",label:"User Management",icon:"ğŸ‘¥"},{path:"/admin/driver-management",label:"Driver Management",icon:"ğŸï¸"},{path:"/admin/eml-upload",label:"EML Upload",icon:"ğŸ“§"},{path:"/admin/styling",label:"Styling",icon:"ğŸ¨"},{path:"/admin/settings",label:"Settings",icon:"âš™ï¸"}],N=i(()=>l.isAdmin),E=i(()=>l.isAuthenticated),L=i(()=>{var t;return((t=l.user)==null?void 0:t.name)||"User"}),I=i(()=>{var t;return l.isAdmin?"Administrator":((t=l.user)==null?void 0:t.role)==="driver"?"Driver":"User"}),U=i(()=>{var s;return(((s=l.user)==null?void 0:s.name)||"U").split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2)}),V=i(()=>{const s=[...y,...S,...k].find(o=>h.path.startsWith(o.path));return(s==null?void 0:s.label)||"Dashboard"}),F=i(()=>({"/home":"Elite karting analytics dashboard - Overview of all stats and performance","/driver-stats":"Performance analytics and driver comparisons","/geographic":"Track locations and regional analysis","/session-analysis":"Session history and lap data","/temporal":"Time-based trends and patterns","/track-performance":"Track-specific statistics","/settings":"Manage your profile and driver connections","/battles":"Head-to-head driver comparisons","/financial":"Cost analysis and spending trends","/predictive":"Performance predictions and insights","/admin/data":"View all database records - Sessions, laps, drivers, tracks","/admin/tracks":"Manage track database","/admin/driver-management":"Manage driver profiles","/admin/eml-upload":"Upload and parse EML session files with duplicate detection","/admin/styling":"Customize dashboard appearance and styling","/admin/settings":"System configuration"})[h.path]||"Welcome to your karting portal"),P=async()=>{await l.logout(),p.push({name:"login"})},x=()=>{p.push({name:"user-settings"})};return(t,s)=>{const o=w("router-link");return r(),c("div",J,[a("aside",{class:u(["sidebar",{"sidebar-open":d.value}])},[s[7]||(s[7]=W('<div class="sidebar-header" data-v-77c8459e><div class="logo-container" data-v-77c8459e><div class="logo-icon" data-v-77c8459e>ğŸï¸</div><div class="logo-text" data-v-77c8459e><div class="brand-name" data-v-77c8459e>ELITE KARTING</div><div class="brand-subtitle" data-v-77c8459e>Analytics Platform</div></div></div></div>',1)),a("div",Q,[a("div",X,n(U.value),1),a("div",Z,[a("div",aa,n(L.value),1),a("div",sa,n(I.value),1)]),s[2]||(s[2]=a("div",{class:"user-status"},[a("div",{class:"status-dot"})],-1))]),E.value?g("",!0):(r(),c("div",ta," âš ï¸ Not authenticated! Please log in. ")),a("nav",ea,[a("div",na,[s[3]||(s[3]=a("div",{class:"nav-section-title"},"ğŸ“Š ANALYTICS",-1)),(r(),c(b,null,_(y,e=>v(o,{key:e.path,to:e.path,class:u(["nav-item",{active:t.$route.path===e.path}])},{default:m(()=>[a("span",oa,n(e.icon),1),a("span",ia,n(e.label),1)]),_:2},1032,["to","class"])),64))]),a("div",la,[s[4]||(s[4]=a("div",{class:"nav-section-title"},"ğŸ‘¤ USER",-1)),(r(),c(b,null,_(S,e=>v(o,{key:e.path,to:e.path,class:u(["nav-item",{active:t.$route.path===e.path}])},{default:m(()=>[a("span",ra,n(e.icon),1),a("span",ca,n(e.label),1)]),_:2},1032,["to","class"])),64))]),N.value?(r(),c("div",da,[s[5]||(s[5]=a("div",{class:"nav-section-title"},"âš™ï¸ MANAGEMENT",-1)),(r(),c(b,null,_(k,e=>v(o,{key:e.path,to:e.path,class:u(["nav-item",{active:t.$route.path===e.path}])},{default:m(()=>[a("span",ua,n(e.icon),1),a("span",pa,n(e.label),1)]),_:2},1032,["to","class"])),64))])):g("",!0)]),a("button",{class:"logout-btn",onClick:P},[...s[6]||(s[6]=[a("span",{class:"nav-icon"},"ğŸšª",-1),a("span",{class:"nav-label"},"Logout",-1)])]),a("div",va,n(A.value),1),a("div",ma,n(T.value),1)],2),a("button",{class:u(["mobile-menu-toggle",{active:d.value}]),onClick:s[0]||(s[0]=e=>d.value=!d.value)},[...s[8]||(s[8]=[a("span",{class:"hamburger-line"},null,-1),a("span",{class:"hamburger-line"},null,-1),a("span",{class:"hamburger-line"},null,-1)])],2),a("main",ha,[a("header",ga,[a("div",ba,[a("h1",null,n(V.value),1),a("p",_a,n(F.value),1)]),a("div",{class:"top-bar-actions"},[s[10]||(s[10]=a("button",{class:"icon-btn",title:"Notifications"},[a("span",{class:"notification-badge"},"3"),a("i",{class:"fa-solid fa-bell"})],-1)),a("button",{class:"icon-btn",title:"Settings",onClick:x},[...s[9]||(s[9]=[a("i",{class:"fa-solid fa-gear"},null,-1)])])])]),a("div",fa,[Y(t.$slots,"default",{},void 0,!0)])]),d.value?(r(),c("div",{key:0,class:"mobile-overlay",onClick:s[1]||(s[1]=e=>d.value=!1)})):g("",!0)])}}}),Sa=C(ya,[["__scopeId","data-v-77c8459e"]]),ka=$({__name:"DashboardView",setup(D){return(l,h)=>{const p=w("router-view");return r(),q(Sa,null,{default:m(()=>[v(p)]),_:1})}}}),wa=C(ka,[["__scopeId","data-v-2388f4c7"]]);export{wa as default};
