import{d as q,k as G,o as n,c as r,e as t,f as C,g as a,v as i,s as S,F as P,n as W,i as y,t as d,z as D,w as U,I as L,B as E,r as u,y as j,l as T}from"./index-BIUjLROW.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const K={class:"track-management"},O={class:"page-header"},Q={class:"filters-section"},H={class:"search-box"},J={class:"filter-buttons"},R={key:0,class:"loading-state"},X={key:1,class:"tracks-grid"},Y={key:0,class:"track-badge"},Z={class:"track-header"},ee={class:"track-flag"},te={class:"track-info"},le={class:"track-name"},se={class:"track-location"},oe={class:"track-stats"},ae={class:"stat-item"},ne={class:"stat-content"},ie={class:"stat-value"},de={class:"stat-item"},re={class:"stat-content"},ue={class:"stat-value"},ve={class:"stat-item"},ce={class:"stat-content"},pe={class:"stat-value"},me={key:1,class:"track-contact"},fe=["href"],be={class:"track-actions"},ye=["onClick"],ke=["onClick"],ge={key:2,class:"empty-state"},_e={class:"modal-content"},we={class:"modal-header"},Ce={class:"form-section"},Te={class:"form-row"},he={class:"form-group full"},Ve={class:"form-row"},Se={class:"form-group"},Ue={class:"form-group"},xe={class:"form-row"},Me={class:"form-group"},De={class:"checkbox-label"},Le={class:"form-group"},Ee={class:"checkbox-label"},Ne={class:"form-section"},Fe={class:"form-row"},$e={class:"form-group"},Ae={class:"form-group"},Be={class:"form-row"},Ie={class:"form-group"},qe={class:"form-group"},Ge={class:"form-section"},Pe={class:"form-row"},We={class:"form-group full"},je={class:"form-row"},ze={class:"form-group"},Ke={class:"form-group"},Oe={class:"form-section"},Qe={class:"form-row"},He={class:"form-group"},Je={class:"form-group"},Re={class:"form-actions"},Xe=["disabled"],Ye={class:"modal-content modal-small"},Ze={class:"modal-header"},et={class:"modal-body"},tt={class:"alert-danger"},lt={class:"alert-message"},st={class:"form-actions"},ot=["disabled"],at=q({__name:"TrackManagementView",setup(nt){const x=u([]),h=u(!1),k=u(!1),g=u(!1),c=u(""),v=u(null),_=u(!1),p=u(!1),m=u(!1),b=u(null),s=u({name:"",city:"",country:"",indoor:!1,emlSupported:!1,distance_km:null,corners:null,width_m:null,elevation_m:null,website:"",phone:"",email:"",latitude:null,longitude:null}),M=j(()=>{let o=x.value;if(c.value){const e=c.value.toLowerCase();o=o.filter(f=>f.name.toLowerCase().includes(e)||f.city.toLowerCase().includes(e)||f.country.toLowerCase().includes(e))}return v.value!==null&&(o=o.filter(e=>e.emlSupported===v.value)),o}),V=async()=>{h.value=!0;try{const o=await T.tracks.getAll();x.value=o.map(e=>({...e,emlSupported:e.eml_supported||!1}))}catch(o){console.error("Failed to load tracks:",o)}finally{h.value=!1}},N=o=>{s.value={...o},p.value=!0},F=o=>{b.value=o,m.value=!0},$=async()=>{k.value=!0;try{const o={name:s.value.name,city:s.value.city,country:s.value.country,distance:s.value.distance_km||void 0,corners:s.value.corners||void 0,width:s.value.width_m||void 0,elevation_change:s.value.elevation_m||void 0,contact:{phone:s.value.phone||void 0,email:s.value.email||void 0,website:s.value.website||void 0},coordinates:s.value.latitude&&s.value.longitude?{lat:s.value.latitude,lng:s.value.longitude}:void 0};p.value&&s.value.id?await T.tracks.update(s.value.id,o):await T.tracks.create(o),await V(),w()}catch(o){console.error("Failed to save track:",o),alert("Failed to save track. Please try again.")}finally{k.value=!1}},A=async()=>{if(b.value){g.value=!0;try{await T.tracks.delete(b.value.id),await V(),m.value=!1,b.value=null}catch(o){console.error("Failed to delete track:",o),alert("Failed to delete track. Please try again.")}finally{g.value=!1}}},w=()=>{_.value=!1,p.value=!1,s.value={name:"",city:"",country:"",indoor:!1,emlSupported:!1,distance_km:null,corners:null,width_m:null,elevation_m:null,website:"",phone:"",email:"",latitude:null,longitude:null}},B=o=>({Netherlands:"ðŸ‡³ðŸ‡±",Belgium:"ðŸ‡§ðŸ‡ª",Spain:"ðŸ‡ªðŸ‡¸",Germany:"ðŸ‡©ðŸ‡ª",France:"ðŸ‡«ðŸ‡·",Italy:"ðŸ‡®ðŸ‡¹",UK:"ðŸ‡¬ðŸ‡§",USA:"ðŸ‡ºðŸ‡¸"})[o]||"ðŸ";return G(()=>{V()}),(o,e)=>{var f;return n(),r("div",K,[t("div",O,[e[24]||(e[24]=t("div",{class:"header-left"},[t("h1",null,"Track Management"),t("p",{class:"subtitle"},"Manage karting tracks and their configurations")],-1)),t("button",{class:"btn-primary",onClick:e[0]||(e[0]=l=>_.value=!0)},[...e[23]||(e[23]=[t("span",{class:"icon"},"âž•",-1),C(" Add New Track ",-1)])])]),t("div",Q,[t("div",H,[e[25]||(e[25]=t("span",{class:"search-icon"},"ðŸ”",-1)),a(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>c.value=l),type:"text",placeholder:"Search tracks by name, city, or country...",class:"search-input"},null,512),[[i,c.value]])]),t("div",J,[t("button",{class:S(["filter-btn",{active:v.value===null}]),onClick:e[2]||(e[2]=l=>v.value=null)}," All Tracks ",2),t("button",{class:S(["filter-btn",{active:v.value===!0}]),onClick:e[3]||(e[3]=l=>v.value=!0)}," EML Supported ",2),t("button",{class:S(["filter-btn",{active:v.value===!1}]),onClick:e[4]||(e[4]=l=>v.value=!1)}," No EML ",2)])]),h.value?(n(),r("div",R,[...e[26]||(e[26]=[t("div",{class:"spinner"},null,-1),t("p",null,"Loading tracks...",-1)])])):M.value.length>0?(n(),r("div",X,[(n(!0),r(P,null,W(M.value,l=>(n(),r("div",{key:l.id,class:"track-card"},[l.emlSupported?(n(),r("div",Y,[...e[27]||(e[27]=[t("span",{class:"badge-icon"},"ðŸ“§",-1),C(" EML Supported ",-1)])])):y("",!0),t("div",Z,[t("div",ee,d(B(l.country)),1),t("div",te,[t("h3",le,d(l.name),1),t("p",se,d(l.city)+", "+d(l.country),1)])]),t("div",oe,[t("div",ae,[e[29]||(e[29]=t("span",{class:"stat-icon"},"ðŸ“",-1)),t("div",ne,[t("span",ie,d(l.distance_km)+"km",1),e[28]||(e[28]=t("span",{class:"stat-label"},"Length",-1))])]),t("div",de,[e[31]||(e[31]=t("span",{class:"stat-icon"},"ðŸ”„",-1)),t("div",re,[t("span",ue,d(l.corners),1),e[30]||(e[30]=t("span",{class:"stat-label"},"Corners",-1))])]),t("div",ve,[e[33]||(e[33]=t("span",{class:"stat-icon"},"ðŸ ",-1)),t("div",ce,[t("span",pe,d(l.indoor?"Indoor":"Outdoor"),1),e[32]||(e[32]=t("span",{class:"stat-label"},"Type",-1))])])]),l.website?(n(),r("div",me,[t("a",{href:l.website,target:"_blank",class:"contact-link"}," ðŸŒ Visit Website ",8,fe)])):y("",!0),t("div",be,[t("button",{class:"btn-icon",onClick:I=>N(l),title:"Edit"}," âœï¸ ",8,ye),t("button",{class:"btn-icon danger",onClick:I=>F(l),title:"Delete"}," ðŸ—‘ï¸ ",8,ke)])]))),128))])):(n(),r("div",ge,[e[34]||(e[34]=t("div",{class:"empty-icon"},"ðŸ",-1)),e[35]||(e[35]=t("h3",null,"No tracks found",-1)),t("p",null,d(c.value?"Try adjusting your search filters":"Get started by adding your first track"),1),c.value?y("",!0):(n(),r("button",{key:0,class:"btn-primary",onClick:e[5]||(e[5]=l=>_.value=!0)}," Add First Track "))])),(n(),D(E,{to:"body"},[_.value||p.value?(n(),r("div",{key:0,class:"modal-overlay",onClick:U(w,["self"])},[t("div",_e,[t("div",we,[t("h2",null,d(p.value?"Edit Track":"Add New Track"),1),t("button",{class:"modal-close",onClick:w},"âœ•")]),t("form",{onSubmit:U($,["prevent"]),class:"modal-form"},[t("div",Ce,[e[41]||(e[41]=t("h3",{class:"section-title"},"Basic Information",-1)),t("div",Te,[t("div",he,[e[36]||(e[36]=t("label",null,"Track Name *",-1)),a(t("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>s.value.name=l),type:"text",required:"",placeholder:"e.g., De Voltage Karting"},null,512),[[i,s.value.name]])])]),t("div",Ve,[t("div",Se,[e[37]||(e[37]=t("label",null,"City *",-1)),a(t("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>s.value.city=l),type:"text",required:"",placeholder:"e.g., Tilburg"},null,512),[[i,s.value.city]])]),t("div",Ue,[e[38]||(e[38]=t("label",null,"Country *",-1)),a(t("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>s.value.country=l),type:"text",required:"",placeholder:"e.g., Netherlands"},null,512),[[i,s.value.country]])])]),t("div",xe,[t("div",Me,[t("label",De,[a(t("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=l=>s.value.indoor=l)},null,512),[[L,s.value.indoor]]),e[39]||(e[39]=t("span",null,"Indoor Track",-1))])]),t("div",Le,[t("label",Ee,[a(t("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=l=>s.value.emlSupported=l)},null,512),[[L,s.value.emlSupported]]),e[40]||(e[40]=t("span",null,"Supports EML Upload",-1))])])])]),t("div",Ne,[e[46]||(e[46]=t("h3",{class:"section-title"},"Track Specifications",-1)),t("div",Fe,[t("div",$e,[e[42]||(e[42]=t("label",null,"Distance (km)",-1)),a(t("input",{"onUpdate:modelValue":e[11]||(e[11]=l=>s.value.distance_km=l),type:"number",step:"0.01",placeholder:"0.85"},null,512),[[i,s.value.distance_km,void 0,{number:!0}]])]),t("div",Ae,[e[43]||(e[43]=t("label",null,"Number of Corners",-1)),a(t("input",{"onUpdate:modelValue":e[12]||(e[12]=l=>s.value.corners=l),type:"number",placeholder:"14"},null,512),[[i,s.value.corners,void 0,{number:!0}]])])]),t("div",Be,[t("div",Ie,[e[44]||(e[44]=t("label",null,"Track Width (m)",-1)),a(t("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>s.value.width_m=l),type:"number",step:"0.1",placeholder:"8.0"},null,512),[[i,s.value.width_m,void 0,{number:!0}]])]),t("div",qe,[e[45]||(e[45]=t("label",null,"Elevation Change (m)",-1)),a(t("input",{"onUpdate:modelValue":e[14]||(e[14]=l=>s.value.elevation_m=l),type:"number",step:"0.1",placeholder:"2.5"},null,512),[[i,s.value.elevation_m,void 0,{number:!0}]])])])]),t("div",Ge,[e[50]||(e[50]=t("h3",{class:"section-title"},"Contact Information",-1)),t("div",Pe,[t("div",We,[e[47]||(e[47]=t("label",null,"Website",-1)),a(t("input",{"onUpdate:modelValue":e[15]||(e[15]=l=>s.value.website=l),type:"url",placeholder:"https://example.com"},null,512),[[i,s.value.website]])])]),t("div",je,[t("div",ze,[e[48]||(e[48]=t("label",null,"Phone",-1)),a(t("input",{"onUpdate:modelValue":e[16]||(e[16]=l=>s.value.phone=l),type:"tel",placeholder:"+31 13 123 4567"},null,512),[[i,s.value.phone]])]),t("div",Ke,[e[49]||(e[49]=t("label",null,"Email",-1)),a(t("input",{"onUpdate:modelValue":e[17]||(e[17]=l=>s.value.email=l),type:"email",placeholder:"info@track.com"},null,512),[[i,s.value.email]])])])]),t("div",Oe,[e[53]||(e[53]=t("h3",{class:"section-title"},"Geographic Coordinates",-1)),t("div",Qe,[t("div",He,[e[51]||(e[51]=t("label",null,"Latitude",-1)),a(t("input",{"onUpdate:modelValue":e[18]||(e[18]=l=>s.value.latitude=l),type:"number",step:"0.000001",placeholder:"51.5555"},null,512),[[i,s.value.latitude,void 0,{number:!0}]])]),t("div",Je,[e[52]||(e[52]=t("label",null,"Longitude",-1)),a(t("input",{"onUpdate:modelValue":e[19]||(e[19]=l=>s.value.longitude=l),type:"number",step:"0.000001",placeholder:"5.0913"},null,512),[[i,s.value.longitude,void 0,{number:!0}]])])])]),t("div",Re,[t("button",{type:"button",class:"btn-secondary",onClick:w}," Cancel "),t("button",{type:"submit",class:"btn-primary",disabled:k.value},d(k.value?"Saving...":p.value?"Update Track":"Create Track"),9,Xe)])],32)])])):y("",!0)])),(n(),D(E,{to:"body"},[m.value?(n(),r("div",{key:0,class:"modal-overlay",onClick:e[22]||(e[22]=U(l=>m.value=!1,["self"]))},[t("div",Ye,[t("div",Ze,[e[54]||(e[54]=t("h2",null,"Delete Track",-1)),t("button",{class:"modal-close",onClick:e[20]||(e[20]=l=>m.value=!1)},"âœ•")]),t("div",et,[t("div",tt,[e[58]||(e[58]=t("span",{class:"alert-icon"},"âš ï¸",-1)),t("div",null,[e[57]||(e[57]=t("p",{class:"alert-title"},"Are you sure?",-1)),t("p",lt,[e[55]||(e[55]=C(" This will permanently delete ",-1)),t("strong",null,d((f=b.value)==null?void 0:f.name),1),e[56]||(e[56]=C(" and all associated data. This action cannot be undone. ",-1))])])])]),t("div",st,[t("button",{class:"btn-secondary",onClick:e[21]||(e[21]=l=>m.value=!1)}," Cancel "),t("button",{class:"btn-danger",onClick:A,disabled:g.value},d(g.value?"Deleting...":"Delete Track"),9,ot)])])])):y("",!0)]))])}}}),rt=z(at,[["__scopeId","data-v-8b80d02b"]]);export{rt as default};
