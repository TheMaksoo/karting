import{d as Ye,u as Xe,k as Ze,l as E,o as n,c as o,e,s as B,w as me,f as V,g as f,I as es,J as j,F as x,n as T,t as a,i as L,v as y,D as ss,r as g,L as _e,y as De}from"./index-BIUjLROW.js";import{_ as ts}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ls={class:"eml-upload-view"},as={key:0,class:"upload-section"},ns={class:"mode-selector"},os={class:"dropzone-content"},is={class:"upload-buttons"},rs={class:"force-track",style:{"margin-top":"10px"}},us={style:{display:"flex","align-items":"center",gap:"8px"}},ds={key:0,style:{"margin-top":"6px"}},ps=["value"],cs={key:1,class:"manual-entry-section"},vs={class:"manual-form"},ms={class:"session-info-card"},_s={class:"form-grid"},fs={class:"field full-width"},gs=["value"],bs={class:"field"},ys={class:"field"},hs={class:"field"},ks={class:"quick-lap-entry"},ws={class:"lap-form"},Ss={class:"form-section primary-fields"},Ds={class:"field-group required driver-field"},Us={class:"autocomplete-wrapper"},Cs={key:0,class:"suggestions-dropdown"},$s=["onClick"],Ls={class:"field-group"},Vs={class:"field-group required"},Ms={class:"field-group"},xs={class:"field-group"},Ts={class:"form-section secondary-fields"},Fs={class:"field-group"},Ps={class:"field-group"},Ns={class:"field-group"},Is={key:0,class:"manual-laps-preview"},As={class:"laps-list"},Es={class:"lap-index"},qs={class:"lap-driver"},Rs={class:"lap-number"},Bs={class:"lap-time"},js={class:"lap-pos"},Os={class:"lap-kart"},Ws={class:"lap-sectors"},zs=["onClick"],Gs={class:"manual-actions"},Hs=["disabled"],Ks={key:2,class:"error-message"},Qs={key:1,class:"batch-progress-section"},Js={class:"progress-bar"},Ys={class:"progress-text"},Xs={class:"current-file"},Zs={class:"batch-stats"},et={class:"success"},st={class:"failed"},tt={key:0,class:"file-progress-log"},lt={class:"log-container"},at={class:"log-icon"},nt={class:"log-filename"},ot={class:"log-message"},it={key:2,class:"batch-complete-section"},rt={class:"summary-stats"},ut={class:"stat-card success"},dt={class:"stat-number"},pt={class:"stat-card duplicates"},ct={class:"stat-number"},vt={class:"stat-card total"},mt={class:"stat-number"},_t={key:0,class:"duplicates-list"},ft={key:1,class:"incomplete-list"},gt={key:2,class:"error-list"},bt={key:3,class:"manual-track-selection"},yt={class:"failed-file-header"},ht={class:"failed-file-actions"},kt=["onUpdate:modelValue"],wt=["value"],St=["onClick","disabled"],Dt={key:4,class:"laps-table-section"},Ut={class:"laps-header"},Ct={class:"pagination-info"},$t={class:"table-actions"},Lt={class:"pagination-controls"},Vt=["disabled"],Mt={class:"page-indicator"},xt=["disabled"],Tt={class:"table-wrapper"},Ft={class:"laps-table"},Pt={class:"button-group"},Nt={key:3,class:"preview-section"},It={class:"preview-header"},At={class:"preview-stats"},Et={class:"track-detected"},qt={key:0,class:"duplicate-warning"},Rt={class:"duplicate-actions"},Bt={class:"session-metadata"},jt={class:"metadata-grid"},Ot={class:"field"},Wt={class:"field"},zt={class:"field"},Gt={class:"field"},Ht={class:"field"},Kt={class:"laps-table-section"},Qt={class:"laps-header"},Jt={class:"pagination-info"},Yt={class:"table-actions"},Xt={class:"pagination-controls"},Zt=["disabled"],el={class:"page-indicator"},sl=["disabled"],tl={class:"table-wrapper"},ll={class:"laps-table"},al=["onUpdate:modelValue"],nl={key:1},ol=["onUpdate:modelValue"],il={key:1},rl=["onUpdate:modelValue"],ul={key:1},dl=["onUpdate:modelValue"],pl={key:1},cl=["onUpdate:modelValue"],vl={key:1},ml=["onUpdate:modelValue"],_l={key:1},fl=["onUpdate:modelValue"],gl={key:1},bl=["onUpdate:modelValue"],yl={key:1},hl=["onUpdate:modelValue"],kl={key:1},wl=["onUpdate:modelValue"],Sl={key:1},Dl=["onUpdate:modelValue"],Ul={key:1},Cl=["onUpdate:modelValue"],$l={key:1},Ll={class:"actions"},Vl=["onClick"],Ml=["onClick"],xl=["onClick"],Tl={class:"action-buttons"},Fl=["disabled"],Pl={key:0},Nl={key:1},Il={key:4,class:"loading-overlay"},Al={class:"modal new-drivers-modal"},El={class:"modal-body"},ql={class:"new-drivers-list"},Rl={class:"driver-info-section"},Bl={class:"driver-name-badge"},jl={class:"user-selection"},Ol=["onUpdate:modelValue"],Wl=["value"],zl=["onClick","disabled"],Gl=Ye({__name:"EmlUploadView",setup(Hl){const ae=Xe(),Y=g(null),P=g("upload"),ne=g(""),X=g(!1),M=g(""),W=g(!1),oe=g(""),z=g(!1),F=g(null),ie=g(!1),re=g(!1),O=g(null),S=g(null),K=g(null),b=_e({track_name:"",session_number:"",session_date:"",session_type:"race",heat_price:0,file_name:"",file_hash:""}),U=g([]),fe=g([]),k=g({current:0,total:0,currentFile:"",fileLog:[]}),m=g({success:0,failed:0,errors:[],duplicates:[],incompleteData:[],savedSessionIds:[],failedAutoDetection:[]}),N=g([]),Q=g("file"),ue=g([]),J=g(!1),G=g(""),D=_e({track_id:"",session_date:"",session_type:"race",heat_price:0}),c=_e({driver_name:"",lap_number:1,lap_time:"",position:null,kart_number:"",sector1:null,sector2:null,sector3:null}),I=g([]),ge=g([]),Z=g([]),ee=g(!1),de=g(!1),se=g([]),be=g([]),H=g({}),te=g(null),h=g(1),C=g(50),pe=De(()=>Math.ceil(U.value.length/C.value)),Ue=De(()=>{const l=(h.value-1)*C.value,s=l+C.value;return U.value.slice(l,s)}),Ce=()=>{const l=Y.value;l.webkitdirectory=!0,l.click()},$e=async l=>{const s=l.target;if(s.files&&s.files.length>0){const u=Array.from(s.files).filter(_=>_.name.endsWith(".eml")||_.name.endsWith(".txt"));if(u.length===0){M.value="No EML files found in the selected folder";return}u.length===1&&u[0]?he(u[0]):await ye(u)}},Le=async l=>{var s;if(X.value=!1,(s=l.dataTransfer)!=null&&s.files&&l.dataTransfer.files.length>0){const u=Array.from(l.dataTransfer.files).filter(_=>_.name.endsWith(".eml")||_.name.endsWith(".txt"));if(u.length===0){M.value="No EML files found";return}u.length===1&&u[0]?he(u[0]):await ye(u)}},ye=async l=>{var s,u,_,v,A,q;P.value="batch-progress",W.value=!0,fe.value=l,k.value={current:0,total:l.length,currentFile:"",fileLog:[]},m.value={success:0,failed:0,errors:[],duplicates:[],incompleteData:[],savedSessionIds:[],failedAutoDetection:[]};for(let R=0;R<l.length;R++){const t=l[R];if(!t)continue;k.value.current=R+1,k.value.currentFile=t.name,k.value.fileLog.push({filename:t.name,status:"processing",message:"Processing..."});const i=k.value.fileLog.length-1;try{const r=J.value&&G.value?Number(G.value):void 0,p=await E.upload.parseEml(t,r);if(p.duplicate_file){const w=p.existing_upload&&(p.existing_upload.status==="partial"||p.existing_upload.laps_count===0),ce=w?"uploaded-incomplete":"uploaded",ve=w?`Already uploaded (${p.existing_upload.upload_date}) - has missing data`:p.message||"Already uploaded";w?m.value.incompleteData.push(t.name):m.value.duplicates.push(t.name),k.value.fileLog[i]={filename:t.name,status:ce,message:ve};continue}if(!p.success){let w="Parse failed";p.errors&&p.errors.length>0?w=p.errors.join(", "):p.require_manual_input&&(w="Requires manual input - incomplete data"),p.require_manual_input&&p.available_tracks?(m.value.failedAutoDetection.push({file:t,fileName:t.name,availableTracks:p.available_tracks}),k.value.fileLog[i]={filename:t.name,status:"failed",message:"Track auto-detection failed - manual selection needed"}):(m.value.errors.push(`${t.name}: ${w}`),m.value.failed++,k.value.fileLog[i]={filename:t.name,status:"failed",message:w});continue}if((s=p.duplicate)!=null&&s.exists){const w=`Duplicate - Session already exists from '${p.duplicate.original_file||"unknown file"}' uploaded ${p.duplicate.upload_date||"earlier"}`;m.value.errors.push(`${t.name}: ${w}`),m.value.failed++,k.value.fileLog[i]={filename:t.name,status:"failed",message:w};continue}const d=await E.upload.saveParsedSession({track_id:p.track.id,session_date:p.data.session_date||new Date().toISOString(),session_type:"race",heat_price:0,session_number:p.data.session_number||"",file_name:p.file_name,file_hash:p.data.file_hash,laps:p.data.laps||[]});if(d.success)m.value.success++,d.session_id&&m.value.savedSessionIds.push(d.session_id),p.data.laps&&N.value.push(...p.data.laps),k.value.fileLog[i]={filename:t.name,status:"success",message:`Imported ${((u=p.data.laps)==null?void 0:u.length)||0} laps`};else{const w=`Save failed - ${d.message||"Unknown error"}`;m.value.errors.push(`${t.name}: ${w}`),m.value.failed++,k.value.fileLog[i]={filename:t.name,status:"failed",message:w}}p.warnings&&p.warnings.length>0&&m.value.errors.push(`${t.name}: âš ï¸ ${p.warnings.join(", ")}`)}catch(r){if(console.error("Upload error for",t.name,r),((_=r.response)==null?void 0:_.status)===409&&((A=(v=r.response)==null?void 0:v.data)!=null&&A.duplicate_file)){const d=r.response.data,w=d.existing_upload&&(d.existing_upload.status==="partial"||d.existing_upload.laps_count===0),ce=w?"uploaded-incomplete":"uploaded",ve=w?`Already uploaded (${d.existing_upload.upload_date}) - has missing data`:d.message||"Already uploaded";w?m.value.incompleteData.push(t.name):m.value.duplicates.push(t.name),k.value.fileLog[i]={filename:t.name,status:ce,message:ve};continue}let p="Upload failed";(q=r.response)!=null&&q.data?r.response.data.errors?p=Array.isArray(r.response.data.errors)?r.response.data.errors.join(", "):JSON.stringify(r.response.data.errors):r.response.data.message&&(p=r.response.data.message):r.message&&(p=r.message),m.value.errors.push(`${t.name}: ${p}`),m.value.failed++,k.value.fileLog[i]={filename:t.name,status:"failed",message:p}}}W.value=!1,P.value="batch-complete"},Ve=async(l,s)=>{var u,_;if(!s){alert("Please select a track first");return}try{W.value=!0,oe.value=`Retrying ${l.fileName} with selected track...`;const v=await E.upload.parseEml(l.file,s);if(v.success&&v.data){const A=await E.upload.saveParsedSession({track_id:v.track.id,session_date:v.data.session_date||new Date().toISOString(),session_type:"race",heat_price:0,session_number:v.data.session_number||"",file_name:v.file_name,file_hash:v.data.file_hash,laps:v.data.laps||[]});A.success?(alert(`âœ… Successfully imported ${l.fileName} with ${((u=v.data.laps)==null?void 0:u.length)||0} laps!`),m.value.failedAutoDetection=m.value.failedAutoDetection.filter(q=>q.fileName!==l.fileName),m.value.success++,v.data.laps&&N.value.push(...v.data.laps)):alert(`Failed to save ${l.fileName}: ${A.message||"Unknown error"}`)}else alert(`Failed to parse ${l.fileName}: ${((_=v.errors)==null?void 0:_.join(", "))||"Unknown error"}`)}catch(v){console.error("Retry error:",v),alert(`Error retrying ${l.fileName}: ${v.message||"Unknown error"}`)}finally{W.value=!1,oe.value=""}},he=async l=>{var s,u,_,v,A,q,R,t,i,r;if(!l.name.endsWith(".eml")&&!l.name.endsWith(".txt")){M.value="Only .eml and .txt files are supported";return}M.value="";try{const p=J.value&&G.value?Number(G.value):void 0,d=await E.upload.parseEml(l,p);if(d.duplicate_file){M.value=d.message,F.value=d.existing_upload;return}if(!d.success){d.require_manual_input?(M.value=`âš ï¸ Warnings: ${(s=d.errors)==null?void 0:s.join(", ")}`,d.partial_data&&(O.value=d.partial_data,b.track_name=((u=d.track)==null?void 0:u.name)||"",ne.value=((_=d.track)==null?void 0:_.id)||"",b.session_number=d.partial_data.session_number||"",b.session_date=d.partial_data.session_date?new Date(d.partial_data.session_date).toISOString().slice(0,16):new Date().toISOString().slice(0,16),b.session_type="race",b.heat_price=0,U.value=d.partial_data.laps||[],P.value="preview")):M.value=((v=d.errors)==null?void 0:v.join(", "))||"Parse failed";return}d.warnings&&d.warnings.length>0&&(M.value=`âš ï¸ ${d.warnings.join(", ")}`),O.value=d.data,F.value=d.duplicate,b.track_name=d.track.name,ne.value=d.track.id,b.session_number=d.data.session_number||"",b.session_date=d.data.session_date?new Date(d.data.session_date).toISOString().slice(0,16):new Date().toISOString().slice(0,16),b.session_type="race",b.heat_price=0,b.file_name=d.file_name,b.file_hash=d.data.file_hash,U.value=d.data.laps||[],P.value="preview"}catch(p){const d=(q=(A=p.response)==null?void 0:A.data)==null?void 0:q.errors,w=(t=(R=p.response)==null?void 0:R.data)==null?void 0:t.error_details;d?M.value=d.join(", "):M.value=((r=(i=p.response)==null?void 0:i.data)==null?void 0:r.message)||"Failed to upload file",w&&console.error("Upload error details:",w)}},Me=()=>{U.value.push({driver_name:"",lap_number:U.value.length+1,lap_time:0,position:null,kart_number:null}),ke(U.value.length-1)},ke=l=>{S.value=l,K.value={...U.value[l]}},xe=l=>{S.value=null,K.value=null},Te=()=>{S.value!==null&&K.value&&(U.value[S.value]=K.value),S.value=null,K.value=null},Fe=l=>{confirm("Delete this lap?")&&U.value.splice(l,1)},Pe=()=>{U.value.sort((l,s)=>l.driver_name.localeCompare(s.driver_name))},Ne=()=>{U.value.sort((l,s)=>(l.position||999)-(s.position||999))},we=async()=>{var l,s;if(U.value.length===0){alert("No laps to save");return}z.value=!0;try{const u={track_id:ne.value,session_date:b.session_date,heat_price:b.heat_price,session_type:b.session_type,session_number:b.session_number,file_name:b.file_name,file_hash:b.file_hash,replace_duplicate:re.value,laps:U.value},_=await E.upload.saveParsedSession(u);if(_.success){const v=re.value?"replaced":"saved";_.new_drivers_created&&_.new_drivers_created.length>0?(se.value=_.new_drivers_created,H.value={},await Ke(),de.value=!0):(alert(`Session ${v} successfully! ${_.laps_imported} laps imported, ${_.drivers_processed.length} drivers processed.`),ae.push("/admin/data"))}else alert("Failed to save session: "+(_.message||"Unknown error"))}catch(u){alert("Failed to save session: "+(((s=(l=u.response)==null?void 0:l.data)==null?void 0:s.message)||u.message)),console.error("Save error:",u)}finally{z.value=!1}},Se=()=>{confirm("Cancel upload? All data will be lost.")&&(P.value="upload",O.value=null,F.value=null,ie.value=!1,U.value=[],M.value="")},Ie=()=>{P.value="upload",O.value=null,F.value=null,ie.value=!1,U.value=[],M.value="",fe.value=[],k.value={current:0,total:0,currentFile:"",fileLog:[]},m.value={success:0,failed:0,errors:[],duplicates:[],incompleteData:[],savedSessionIds:[],failedAutoDetection:[]},N.value=[]},Ae=l=>!l.driver_name||!l.lap_time||l.lap_time===0,Ee=()=>{h.value>1&&h.value--},qe=()=>{h.value<pe.value&&h.value++},$=l=>(h.value-1)*C.value+l,Re=()=>{if(!c.driver_name||!c.lap_time){alert("Driver name and lap time are required");return}let l=0;const s=c.lap_time.trim();if(s.includes(":")){const u=s.split(":"),_=u[0],v=u[1];_&&v&&(l=parseInt(_)*60+parseFloat(v))}else l=parseFloat(s);if(isNaN(l)||l<=0){alert("Invalid lap time format. Use MM:SS.mmm or SS.mmm");return}I.value.push({driver_name:c.driver_name,lap_number:c.lap_number||1,lap_time:l,position:c.position,kart_number:c.kart_number,sector1:c.sector1,sector2:c.sector2,sector3:c.sector3}),c.lap_number++,c.lap_time="",c.position=null,c.kart_number="",c.sector1=null,c.sector2=null,c.sector3=null},Be=l=>{I.value.splice(l,1)},je=()=>{confirm("Clear all laps?")&&(I.value=[])},Oe=l=>{const s=Math.floor(l/60),u=(l%60).toFixed(3);return s>0?`${s}:${u.padStart(6,"0")}`:`${u}s`},We=async()=>{var l,s;if(!D.track_id||!D.session_date){alert("Track and session date are required");return}if(I.value.length===0){alert("Add at least one lap");return}z.value=!0;try{const u=await E.upload.saveParsedSession({track_id:D.track_id,session_date:D.session_date,session_type:D.session_type,heat_price:D.heat_price,session_number:"",file_name:"Manual Entry",file_hash:`manual_${Date.now()}`,laps:I.value});u.success?(alert(`âœ… Session saved! ${I.value.length} laps imported.`),D.track_id="",D.session_date="",D.session_type="race",D.heat_price=0,I.value=[],c.driver_name="",c.lap_number=1,ae.push("/sessions")):alert("Failed to save session: "+(u.message||"Unknown error"))}catch(u){console.error("Save error:",u),alert("Error saving session: "+(((s=(l=u.response)==null?void 0:l.data)==null?void 0:s.message)||u.message))}finally{z.value=!1}};Ze(async()=>{try{ue.value=await E.getTracks(),ge.value=await E.getDrivers()}catch(l){console.error("Failed to load data:",l)}});const ze=()=>{const l=c.driver_name.toLowerCase().trim();if(!l||l.length<2){Z.value=[];return}Z.value=ge.value.filter(s=>{const u=s.name.toLowerCase();let _=0;for(let v=0;v<u.length&&_<l.length;v++)u[v]===l[_]&&_++;return _===l.length}).slice(0,8)},Ge=l=>{c.driver_name=l.name,ee.value=!1},He=()=>{setTimeout(()=>{ee.value=!1},200)},Ke=async()=>{try{const l=await E.adminUsers.getAll();be.value=l}catch(l){console.error("Failed to load users:",l)}},Qe=async l=>{var u,_;const s=H.value[l];if(s){te.value=l;try{await E.adminUsers.connectDriver(s,l),alert("Driver connected successfully!"),se.value=se.value.filter(v=>v.id!==l),delete H.value[l]}catch(v){alert(((_=(u=v.response)==null?void 0:u.data)==null?void 0:_.message)||"Failed to connect driver")}finally{te.value=null}}},le=()=>{de.value=!1,ae.push("/admin/data")},Je=()=>{confirm("Skip connecting these drivers? You can connect them later from User Management.")&&le()};return(l,s)=>{var u,_,v,A,q,R;return n(),o("div",ls,[s[104]||(s[104]=e("h1",null,"EML Session Upload",-1)),P.value==="upload"?(n(),o("div",as,[e("div",ns,[e("button",{onClick:s[0]||(s[0]=t=>Q.value="file"),class:B([{active:Q.value==="file"},"mode-btn"])}," ðŸ“§ File Upload ",2),e("button",{onClick:s[1]||(s[1]=t=>Q.value="manual"),class:B([{active:Q.value==="manual"},"mode-btn"])}," âœï¸ Manual Entry ",2)]),Q.value==="file"?(n(),o("div",{key:0,class:B(["dropzone",{dragging:X.value}]),onDrop:me(Le,["prevent"]),onDragover:s[5]||(s[5]=me(()=>{},["prevent"])),onDragenter:s[6]||(s[6]=t=>X.value=!0),onDragleave:s[7]||(s[7]=t=>X.value=!1)},[e("input",{ref_key:"fileInput",ref:Y,type:"file",accept:".eml,.txt",onChange:$e,multiple:"",hidden:""},null,544),e("div",os,[s[37]||(s[37]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"17 8 12 3 7 8"}),e("line",{x1:"12",y1:"3",x2:"12",y2:"15"})],-1)),s[38]||(s[38]=e("p",null,"Drag & drop EML files or folders here",-1)),e("div",is,[e("button",{onClick:s[2]||(s[2]=()=>{Y.value&&Y.value.click()}),type:"button",class:"btn-secondary"},[...s[33]||(s[33]=[e("span",{class:"icon"},"ðŸ“„",-1),V(" Upload File ",-1)])]),e("button",{onClick:Ce,type:"button",class:"btn-primary"},[...s[34]||(s[34]=[e("span",{class:"icon"},"ðŸ“",-1),V(" Upload Folder ",-1)])])]),e("div",rs,[e("label",us,[f(e("input",{type:"checkbox","onUpdate:modelValue":s[3]||(s[3]=t=>J.value=t)},null,512),[[es,J.value]]),s[35]||(s[35]=e("span",null,"Force track for all files",-1))]),J.value?(n(),o("div",ds,[f(e("select",{"onUpdate:modelValue":s[4]||(s[4]=t=>G.value=t)},[s[36]||(s[36]=e("option",{value:""},"Select track to force",-1)),(n(!0),o(x,null,T(ue.value,t=>(n(),o("option",{key:t.id,value:t.id},a(t.name)+" - "+a(t.city),9,ps))),128))],512),[[j,G.value]])])):L("",!0)]),s[39]||(s[39]=e("small",null,"Single file or batch folder upload supported",-1)),s[40]||(s[40]=e("small",null,"Track and drivers auto-detected from each email",-1))])],34)):(n(),o("div",cs,[s[58]||(s[58]=e("div",{class:"manual-header"},[e("div",null,[e("h2",null,"âœï¸ Manual Lap Entry"),e("p",{class:"hint"},"For sessions without email data - enter laps directly")])],-1)),e("div",vs,[e("div",ms,[s[47]||(s[47]=e("h3",null,"ðŸ“ Session Information",-1)),e("div",_s,[e("div",fs,[s[42]||(s[42]=e("label",null,[V("Track "),e("span",{class:"required"},"*")],-1)),f(e("select",{"onUpdate:modelValue":s[8]||(s[8]=t=>D.track_id=t),required:""},[s[41]||(s[41]=e("option",{value:"",disabled:""},"Select Track",-1)),(n(!0),o(x,null,T(ue.value,t=>(n(),o("option",{key:t.id,value:t.id},a(t.name)+" - "+a(t.city),9,gs))),128))],512),[[j,D.track_id]])]),e("div",bs,[s[43]||(s[43]=e("label",null,[V("Session Date "),e("span",{class:"required"},"*")],-1)),f(e("input",{"onUpdate:modelValue":s[9]||(s[9]=t=>D.session_date=t),type:"datetime-local",required:""},null,512),[[y,D.session_date]])]),e("div",ys,[s[45]||(s[45]=e("label",null,"Session Type",-1)),f(e("select",{"onUpdate:modelValue":s[10]||(s[10]=t=>D.session_type=t)},[...s[44]||(s[44]=[e("option",{value:"race"},"Race",-1),e("option",{value:"practice"},"Practice",-1),e("option",{value:"qualifying"},"Qualifying",-1),e("option",{value:"heat"},"Heat",-1)])],512),[[j,D.session_type]])]),e("div",hs,[s[46]||(s[46]=e("label",null,"Heat Price (â‚¬)",-1)),f(e("input",{"onUpdate:modelValue":s[11]||(s[11]=t=>D.heat_price=t),type:"number",step:"0.01",placeholder:"0.00"},null,512),[[y,D.heat_price,void 0,{number:!0}]])])])]),e("div",ks,[s[57]||(s[57]=e("div",{class:"entry-header"},[e("h3",null,"âš¡ Quick Add Lap"),e("p",{class:"entry-hint"},"Type driver name, lap time, and hit Add. Lap number auto-increments!")],-1)),e("div",ws,[e("div",Ss,[e("div",Ds,[s[48]||(s[48]=e("label",null,"Driver Name",-1)),e("div",Us,[f(e("input",{"onUpdate:modelValue":s[12]||(s[12]=t=>c.driver_name=t),onInput:ze,onFocus:s[13]||(s[13]=t=>ee.value=!0),onBlur:He,type:"text",placeholder:"Start typing driver name...",autocomplete:"off"},null,544),[[y,c.driver_name]]),ee.value&&Z.value.length>0?(n(),o("div",Cs,[(n(!0),o(x,null,T(Z.value,t=>(n(),o("div",{key:t.id,onClick:i=>Ge(t),class:"suggestion-item"},a(t.name),9,$s))),128))])):L("",!0)])]),e("div",Ls,[s[49]||(s[49]=e("label",null,"Lap #",-1)),f(e("input",{"onUpdate:modelValue":s[14]||(s[14]=t=>c.lap_number=t),type:"number",min:"1",placeholder:"1"},null,512),[[y,c.lap_number,void 0,{number:!0}]])]),e("div",Vs,[s[50]||(s[50]=e("label",null,"Lap Time",-1)),f(e("input",{"onUpdate:modelValue":s[15]||(s[15]=t=>c.lap_time=t),type:"text",placeholder:"1:23.456 or 83.456"},null,512),[[y,c.lap_time]])]),e("div",Ms,[s[51]||(s[51]=e("label",null,"Position",-1)),f(e("input",{"onUpdate:modelValue":s[16]||(s[16]=t=>c.position=t),type:"number",min:"1",placeholder:"P1"},null,512),[[y,c.position,void 0,{number:!0}]])]),e("div",xs,[s[52]||(s[52]=e("label",null,"Kart #",-1)),f(e("input",{"onUpdate:modelValue":s[17]||(s[17]=t=>c.kart_number=t),type:"text",placeholder:"12"},null,512),[[y,c.kart_number]])])]),e("div",Ts,[e("div",Fs,[s[53]||(s[53]=e("label",null,[V("Sector 1 "),e("span",{class:"optional"},"(optional)")],-1)),f(e("input",{"onUpdate:modelValue":s[18]||(s[18]=t=>c.sector1=t),type:"number",step:"0.001",placeholder:"20.123"},null,512),[[y,c.sector1,void 0,{number:!0}]])]),e("div",Ps,[s[54]||(s[54]=e("label",null,[V("Sector 2 "),e("span",{class:"optional"},"(optional)")],-1)),f(e("input",{"onUpdate:modelValue":s[19]||(s[19]=t=>c.sector2=t),type:"number",step:"0.001",placeholder:"25.456"},null,512),[[y,c.sector2,void 0,{number:!0}]])]),e("div",Ns,[s[55]||(s[55]=e("label",null,[V("Sector 3 "),e("span",{class:"optional"},"(optional)")],-1)),f(e("input",{"onUpdate:modelValue":s[20]||(s[20]=t=>c.sector3=t),type:"number",step:"0.001",placeholder:"22.789"},null,512),[[y,c.sector3,void 0,{number:!0}]])]),e("div",{class:"field-group add-button-wrapper"},[e("button",{onClick:Re,class:"btn-add-lap"},[...s[56]||(s[56]=[e("span",{class:"plus-icon"},"+",-1),e("span",null,"Add Lap",-1)])])])])])]),I.value.length>0?(n(),o("div",Is,[e("h3",null,"ðŸ“‹ Laps to Import ("+a(I.value.length)+")",1),e("div",As,[(n(!0),o(x,null,T(I.value,(t,i)=>{var r,p,d;return n(),o("div",{key:i,class:"lap-item"},[e("span",Es,a(i+1),1),e("span",qs,a(t.driver_name),1),e("span",Rs,"L"+a(t.lap_number),1),e("span",Bs,a(Oe(t.lap_time)),1),e("span",js,a(t.position?`P${t.position}`:"-"),1),e("span",Os,a(t.kart_number?`#${t.kart_number}`:"-"),1),e("span",Ws,a(t.sector1||t.sector2||t.sector3?`S: ${((r=t.sector1)==null?void 0:r.toFixed(3))||"-"}/${((p=t.sector2)==null?void 0:p.toFixed(3))||"-"}/${((d=t.sector3)==null?void 0:d.toFixed(3))||"-"}`:"No sectors"),1),e("button",{onClick:w=>Be(i),class:"btn-remove"},"Ã—",8,zs)])}),128))]),e("div",Gs,[e("button",{onClick:je,class:"btn-secondary"},"Clear All"),e("button",{onClick:We,class:"btn-primary",disabled:!D.track_id||!D.session_date}," Save "+a(I.value.length)+" Laps ",9,Hs)])])):L("",!0)])])),M.value?(n(),o("div",Ks,a(M.value),1)):L("",!0)])):L("",!0),P.value==="batch-progress"||W.value&&k.value.total>0?(n(),o("div",Qs,[s[60]||(s[60]=e("h2",null,"Processing Files",-1)),e("div",Js,[e("div",{class:"progress-fill",style:ss({width:`${k.value.current/k.value.total*100}%`})},null,4)]),e("p",Ys,a(k.value.current)+" of "+a(k.value.total)+" files processed",1),e("p",Xs,"ðŸ“„ "+a(k.value.currentFile),1),e("div",Zs,[e("span",et,"âœ… "+a(m.value.success)+" successful",1),e("span",st,"âŒ "+a(m.value.failed)+" failed",1)]),k.value.fileLog.length>0?(n(),o("div",tt,[s[59]||(s[59]=e("h3",null,"Processing Log:",-1)),e("div",lt,[(n(!0),o(x,null,T(k.value.fileLog,(t,i)=>(n(),o("div",{key:i,class:B(["log-entry",{success:t.status==="success",uploaded:t.status==="uploaded","uploaded-incomplete":t.status==="uploaded-incomplete",failed:t.status==="failed",processing:t.status==="processing"}])},[e("span",at,a(t.status==="success"?"âœ…":t.status==="uploaded"?"ðŸ”µ":t.status==="uploaded-incomplete"?"ðŸŸ¡":t.status==="failed"?"âŒ":"â³"),1),e("span",nt,a(t.filename),1),e("span",ot,a(t.message),1)],2))),128))])])):L("",!0)])):L("",!0),P.value==="batch-complete"?(n(),o("div",it,[s[77]||(s[77]=e("h2",null,"Batch Upload Complete",-1)),e("div",rt,[e("div",ut,[e("div",dt,a(m.value.success),1),s[61]||(s[61]=e("div",{class:"stat-label"},"Sessions Imported",-1))]),e("div",pt,[e("div",ct,a(((u=m.value.duplicates)==null?void 0:u.length)||0),1),s[62]||(s[62]=e("div",{class:"stat-label"},"Duplicates",-1))]),e("div",vt,[e("div",mt,a(k.value.total),1),s[63]||(s[63]=e("div",{class:"stat-label"},"Total Files",-1))])]),m.value.duplicates&&m.value.duplicates.length>0?(n(),o("div",_t,[s[64]||(s[64]=e("h3",null,"Duplicate Files",-1)),s[65]||(s[65]=e("p",null,"These files were already uploaded previously:",-1)),e("ul",null,[(n(!0),o(x,null,T(m.value.duplicates,(t,i)=>(n(),o("li",{key:i},a(t),1))),128))])])):L("",!0),m.value.incompleteData&&m.value.incompleteData.length>0?(n(),o("div",ft,[s[66]||(s[66]=e("h3",null,"Missing Data",-1)),s[67]||(s[67]=e("p",null,"These files were uploaded but have incomplete or missing lap data:",-1)),e("ul",null,[(n(!0),o(x,null,T(m.value.incompleteData,(t,i)=>(n(),o("li",{key:i},a(t),1))),128))])])):L("",!0),m.value.errors.length>0?(n(),o("div",gt,[s[68]||(s[68]=e("h3",null,"Errors",-1)),s[69]||(s[69]=e("p",null,"These files failed to process:",-1)),e("ul",null,[(n(!0),o(x,null,T(m.value.errors,(t,i)=>(n(),o("li",{key:i},a(t),1))),128))])])):L("",!0),m.value.failedAutoDetection&&m.value.failedAutoDetection.length>0?(n(),o("div",bt,[s[72]||(s[72]=e("h3",null,"âš ï¸ Manual Track Selection Required",-1)),s[73]||(s[73]=e("p",null,"These files could not auto-detect the track. Please select the track manually:",-1)),(n(!0),o(x,null,T(m.value.failedAutoDetection,(t,i)=>(n(),o("div",{key:i,class:"failed-file-card"},[e("div",yt,[e("strong",null,"ðŸ“„ "+a(t.fileName),1)]),e("div",ht,[s[71]||(s[71]=e("label",null,"Select Track:",-1)),f(e("select",{"onUpdate:modelValue":r=>t.selectedTrackId=r,class:"track-select"},[s[70]||(s[70]=e("option",{value:"",disabled:""},"Choose a track",-1)),(n(!0),o(x,null,T(t.availableTracks,r=>(n(),o("option",{key:r.id,value:r.id},a(r.name)+" - "+a(r.city),9,wt))),128))],8,kt),[[j,t.selectedTrackId]]),e("button",{onClick:r=>Ve(t,t.selectedTrackId),disabled:!t.selectedTrackId,class:"btn-primary btn-small"}," Retry Upload ",8,St)])]))),128))])):L("",!0),N.value.length>0?(n(),o("div",Dt,[e("div",Ut,[e("h3",null,[s[74]||(s[74]=V("Uploaded Laps ",-1)),e("small",null,"("+a(N.value.length)+" laps total)",1)]),e("div",Ct," Showing "+a((h.value-1)*C.value+1)+"-"+a(Math.min(h.value*C.value,N.value.length))+" of "+a(N.value.length),1)]),e("div",$t,[e("div",Lt,[e("button",{onClick:s[21]||(s[21]=t=>h.value=Math.max(1,h.value-1)),disabled:h.value===1,class:"btn-page"},"Â« Prev",8,Vt),e("span",Mt,"Page "+a(h.value)+" of "+a(Math.ceil(N.value.length/C.value)),1),e("button",{onClick:s[22]||(s[22]=t=>h.value=Math.min(Math.ceil(N.value.length/C.value),h.value+1)),disabled:h.value===Math.ceil(N.value.length/C.value),class:"btn-page"},"Next Â»",8,xt),f(e("select",{"onUpdate:modelValue":s[23]||(s[23]=t=>C.value=t),onChange:s[24]||(s[24]=t=>h.value=1),class:"page-size-select"},[...s[75]||(s[75]=[e("option",{value:25},"25 per page",-1),e("option",{value:50},"50 per page",-1),e("option",{value:100},"100 per page",-1)])],544),[[j,C.value,void 0,{number:!0}]])])]),e("div",Tt,[e("table",Ft,[s[76]||(s[76]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Driver Name"),e("th",null,"Lap #"),e("th",null,"Lap Time (s)"),e("th",null,"Position"),e("th",null,"Kart #"),e("th",null,"Sector 1"),e("th",null,"Sector 2"),e("th",null,"Sector 3")])],-1)),e("tbody",null,[(n(!0),o(x,null,T(N.value.slice((h.value-1)*C.value,h.value*C.value),(t,i)=>(n(),o("tr",{key:i},[e("td",null,a((h.value-1)*C.value+i+1),1),e("td",null,a(t.driver_name||"-"),1),e("td",null,a(t.lap_number||"-"),1),e("td",null,a(t.lap_time?t.lap_time.toFixed(3)+"s":"-"),1),e("td",null,a(t.position||"-"),1),e("td",null,a(t.kart_number||"-"),1),e("td",null,a(t.sector1?t.sector1.toFixed(3)+"s":"-"),1),e("td",null,a(t.sector2?t.sector2.toFixed(3)+"s":"-"),1),e("td",null,a(t.sector3?t.sector3.toFixed(3)+"s":"-"),1)]))),128))])])])])):L("",!0),e("div",Pt,[e("button",{onClick:Ie,class:"btn-secondary"},"Upload More"),e("button",{onClick:s[25]||(s[25]=t=>l.$router.push("/sessions")),class:"btn-primary"},"View All Sessions")])])):L("",!0),P.value==="preview"?(n(),o("div",Nt,[e("div",It,[s[78]||(s[78]=e("h2",null,"Parsed Session Data",-1)),e("div",At,[e("span",Et,"ðŸ“ "+a(((_=O.value)==null?void 0:_.track_name)||b.track_name),1),e("span",null,a(((v=O.value)==null?void 0:v.laps_count)||0)+" laps",1),e("span",null,a(((A=O.value)==null?void 0:A.drivers_detected)||0)+" drivers",1)])]),(q=F.value)!=null&&q.exists?(n(),o("div",qt,[s[86]||(s[86]=e("h3",null,"âš ï¸ Duplicate Lap Times Detected",-1)),s[87]||(s[87]=e("p",null,"A session with similar lap times already exists:",-1)),e("ul",null,[e("li",null,[s[79]||(s[79]=e("strong",null,"Original File:",-1)),V(" "+a(F.value.original_file||"Unknown"),1)]),e("li",null,[s[80]||(s[80]=e("strong",null,"Uploaded:",-1)),V(" "+a(F.value.upload_date?new Date(F.value.upload_date).toLocaleString():"Earlier"),1)]),e("li",null,[s[81]||(s[81]=e("strong",null,"Session Date:",-1)),V(" "+a(new Date(F.value.session_date).toLocaleString()),1)]),e("li",null,[s[82]||(s[82]=e("strong",null,"Laps:",-1)),V(" "+a(F.value.laps_count),1)]),e("li",null,[s[83]||(s[83]=e("strong",null,"Drivers:",-1)),V(" "+a((R=F.value.drivers)==null?void 0:R.join(", ")),1)])]),e("div",Rt,[e("button",{onClick:s[26]||(s[26]=t=>{re.value=!0,we()}),class:"btn-danger"},[...s[84]||(s[84]=[e("span",{class:"icon"},"ðŸ”„",-1),V(" Replace Existing Session ",-1)])]),e("button",{onClick:Se,class:"btn-secondary"},[...s[85]||(s[85]=[e("span",{class:"icon"},"âœ–",-1),V(" Cancel Upload ",-1)])])]),s[88]||(s[88]=e("p",{class:"duplicate-note"},"âš ï¸ Replacing will permanently delete the old session and all its lap data.",-1))])):L("",!0),e("div",Bt,[s[95]||(s[95]=e("h3",null,"Session Information",-1)),e("div",jt,[e("div",Ot,[s[89]||(s[89]=e("label",null,"Track:",-1)),f(e("input",{"onUpdate:modelValue":s[27]||(s[27]=t=>b.track_name=t),type:"text",readonly:""},null,512),[[y,b.track_name]])]),e("div",Wt,[s[90]||(s[90]=e("label",null,"Session Number:",-1)),f(e("input",{"onUpdate:modelValue":s[28]||(s[28]=t=>b.session_number=t),type:"text"},null,512),[[y,b.session_number]])]),e("div",zt,[s[91]||(s[91]=e("label",null,"Session Date:",-1)),f(e("input",{"onUpdate:modelValue":s[29]||(s[29]=t=>b.session_date=t),type:"datetime-local"},null,512),[[y,b.session_date]])]),e("div",Gt,[s[93]||(s[93]=e("label",null,"Session Type:",-1)),f(e("select",{"onUpdate:modelValue":s[30]||(s[30]=t=>b.session_type=t)},[...s[92]||(s[92]=[e("option",{value:"race"},"Race",-1),e("option",{value:"practice"},"Practice",-1),e("option",{value:"qualifying"},"Qualifying",-1),e("option",{value:"heat"},"Heat",-1)])],512),[[j,b.session_type]])]),e("div",Ht,[s[94]||(s[94]=e("label",null,"Heat Price (â‚¬):",-1)),f(e("input",{"onUpdate:modelValue":s[31]||(s[31]=t=>b.heat_price=t),type:"number",step:"0.01"},null,512),[[y,b.heat_price,void 0,{number:!0}]])])])]),e("div",Kt,[e("div",Qt,[e("h3",null,[s[96]||(s[96]=V("Laps Data ",-1)),e("small",null,"("+a(U.value.length)+" laps total)",1)]),e("div",Jt," Showing "+a((h.value-1)*C.value+1)+"-"+a(Math.min(h.value*C.value,U.value.length))+" of "+a(U.value.length),1)]),e("div",Yt,[e("button",{onClick:Me,class:"btn-add"},"+ Add Lap"),e("button",{onClick:Pe,class:"btn-secondary"},"Sort by Driver"),e("button",{onClick:Ne,class:"btn-secondary"},"Sort by Position"),e("div",Xt,[e("button",{onClick:Ee,disabled:h.value===1,class:"btn-page"},"Â« Prev",8,Zt),e("span",el,"Page "+a(h.value)+" of "+a(pe.value),1),e("button",{onClick:qe,disabled:h.value===pe.value,class:"btn-page"},"Next Â»",8,sl),f(e("select",{"onUpdate:modelValue":s[32]||(s[32]=t=>C.value=t),class:"page-size-select"},[...s[97]||(s[97]=[e("option",{value:25},"25 per page",-1),e("option",{value:50},"50 per page",-1),e("option",{value:100},"100 per page",-1)])],512),[[j,C.value,void 0,{number:!0}]])])]),e("div",tl,[e("table",ll,[s[98]||(s[98]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Driver Name"),e("th",null,"Lap #"),e("th",null,"Lap Time (s)"),e("th",null,"Position"),e("th",null,"Kart #"),e("th",null,"Sector 1"),e("th",null,"Sector 2"),e("th",null,"Sector 3"),e("th",null,"Gap to Best"),e("th",null,"Interval"),e("th",null,"Gap to Prev"),e("th",null,"Avg Speed"),e("th",null,"Actions")])],-1)),e("tbody",null,[(n(!0),o(x,null,T(Ue.value,(t,i)=>(n(),o("tr",{key:i,class:B({editing:S.value===$(i),"missing-data":Ae(t),"warning-row":t.warning})},[e("td",null,a(i+1),1),e("td",{class:B({"missing-field":!t.driver_name})},[S.value===$(i)?f((n(),o("input",{key:0,"onUpdate:modelValue":r=>t.driver_name=r,type:"text",placeholder:"Driver name required"},null,8,al)),[[y,t.driver_name]]):(n(),o("span",nl,a(t.driver_name||"âš ï¸ Missing"),1))],2),e("td",{class:B({"missing-field":!t.lap_number})},[S.value===$(i)?f((n(),o("input",{key:0,"onUpdate:modelValue":r=>t.lap_number=r,type:"number",min:"1",placeholder:"Lap #"},null,8,ol)),[[y,t.lap_number,void 0,{number:!0}]]):(n(),o("span",il,a(t.lap_number||"âš ï¸ Missing"),1))],2),e("td",{class:B({"missing-field":!t.lap_time||t.lap_time===0})},[S.value===$(i)?f((n(),o("input",{key:0,"onUpdate:modelValue":r=>t.lap_time=r,type:"number",step:"0.001",placeholder:"Time in seconds"},null,8,rl)),[[y,t.lap_time,void 0,{number:!0}]]):(n(),o("span",ul,a(t.lap_time?t.lap_time.toFixed(3)+"s":"âš ï¸ Missing"),1))],2),e("td",null,[S.value===$(i)?f((n(),o("input",{key:0,"onUpdate:modelValue":r=>t.position=r,type:"number",min:"1",placeholder:"Position"},null,8,dl)),[[y,t.position,void 0,{number:!0}]]):(n(),o("span",pl,a(t.position||"-"),1))]),e("td",null,[S.value===$(i)?f((n(),o("input",{key:0,"onUpdate:modelValue":r=>t.kart_number=r,type:"text",placeholder:"Kart #"},null,8,cl)),[[y,t.kart_number]]):(n(),o("span",vl,a(t.kart_number||"-"),1))]),e("td",null,[S.value===$(i)?f((n(),o("input",{key:0,"onUpdate:modelValue":r=>t.sector1=r,type:"number",step:"0.001",placeholder:"S1"},null,8,ml)),[[y,t.sector1,void 0,{number:!0}]]):(n(),o("span",_l,a(t.sector1?t.sector1.toFixed(3)+"s":"-"),1))]),e("td",null,[S.value===$(i)?f((n(),o("input",{key:0,"onUpdate:modelValue":r=>t.sector2=r,type:"number",step:"0.001",placeholder:"S2"},null,8,fl)),[[y,t.sector2,void 0,{number:!0}]]):(n(),o("span",gl,a(t.sector2?t.sector2.toFixed(3)+"s":"-"),1))]),e("td",null,[S.value===$(i)?f((n(),o("input",{key:0,"onUpdate:modelValue":r=>t.sector3=r,type:"number",step:"0.001",placeholder:"S3"},null,8,bl)),[[y,t.sector3,void 0,{number:!0}]]):(n(),o("span",yl,a(t.sector3?t.sector3.toFixed(3)+"s":"-"),1))]),e("td",null,[S.value===$(i)?f((n(),o("input",{key:0,"onUpdate:modelValue":r=>t.gap_to_best_lap=r,type:"number",step:"0.001",placeholder:"Gap"},null,8,hl)),[[y,t.gap_to_best_lap,void 0,{number:!0}]]):(n(),o("span",kl,a(t.gap_to_best_lap?t.gap_to_best_lap.toFixed(3)+"s":"-"),1))]),e("td",null,[S.value===$(i)?f((n(),o("input",{key:0,"onUpdate:modelValue":r=>t.interval=r,type:"number",step:"0.001",placeholder:"Interval"},null,8,wl)),[[y,t.interval,void 0,{number:!0}]]):(n(),o("span",Sl,a(t.interval?t.interval.toFixed(3)+"s":"-"),1))]),e("td",null,[S.value===$(i)?f((n(),o("input",{key:0,"onUpdate:modelValue":r=>t.gap_to_previous=r,type:"number",step:"0.001",placeholder:"Gap Prev"},null,8,Dl)),[[y,t.gap_to_previous,void 0,{number:!0}]]):(n(),o("span",Ul,a(t.gap_to_previous?t.gap_to_previous.toFixed(3)+"s":"-"),1))]),e("td",null,[S.value===$(i)?f((n(),o("input",{key:0,"onUpdate:modelValue":r=>t.avg_speed=r,type:"number",step:"0.1",placeholder:"Speed"},null,8,Cl)),[[y,t.avg_speed,void 0,{number:!0}]]):(n(),o("span",$l,a(t.avg_speed?t.avg_speed.toFixed(1)+" km/h":"-"),1))]),e("td",Ll,[S.value===$(i)?(n(),o("button",{key:0,onClick:r=>xe($(i)),class:"btn-icon btn-success"},"âœ“",8,Vl)):L("",!0),S.value===$(i)?(n(),o("button",{key:1,onClick:Te,class:"btn-icon btn-secondary"},"âœ—")):(n(),o("button",{key:2,onClick:r=>ke($(i)),class:"btn-icon btn-edit"},"âœŽ",8,Ml)),e("button",{onClick:r=>Fe($(i)),class:"btn-icon btn-danger"},"ðŸ—‘",8,xl)])],2))),128))])])])]),e("div",Tl,[e("button",{onClick:Se,class:"btn-secondary"},"Cancel"),e("button",{onClick:we,class:"btn-primary",disabled:z.value||F.value&&!ie.value},[z.value?(n(),o("span",Pl,"Saving...")):(n(),o("span",Nl,"Save Session"))],8,Fl)])])):L("",!0),W.value&&P.value!=="batch-progress"?(n(),o("div",Il,[s[99]||(s[99]=e("div",{class:"spinner"},null,-1)),e("p",null,a(oe.value),1)])):L("",!0),de.value?(n(),o("div",{key:5,class:"modal-overlay",onClick:me(le,["self"])},[e("div",Al,[e("div",{class:"modal-header"},[s[100]||(s[100]=e("h2",null,"ðŸ†• New Drivers Detected",-1)),e("button",{onClick:le,class:"close-btn"},"Ã—")]),e("div",El,[s[103]||(s[103]=e("p",{class:"modal-hint"},"The following new drivers were created from the upload. Connect them to user accounts:",-1)),e("div",ql,[(n(!0),o(x,null,T(se.value,t=>(n(),o("div",{key:t.id,class:"new-driver-item"},[e("div",Rl,[e("div",Bl,[s[101]||(s[101]=e("span",{class:"driver-icon"},"ðŸŽï¸",-1)),e("strong",null,a(t.name),1)])]),e("div",jl,[f(e("select",{"onUpdate:modelValue":i=>H.value[t.id]=i,class:"user-select"},[s[102]||(s[102]=e("option",{value:""},"Select user...",-1)),(n(!0),o(x,null,T(be.value,i=>(n(),o("option",{key:i.id,value:i.id},a(i.name)+" ("+a(i.email)+") ",9,Wl))),128))],8,Ol),[[j,H.value[t.id]]]),e("button",{onClick:i=>Qe(t.id),disabled:!H.value[t.id]||te.value===t.id,class:"btn-sm btn-connect"},a(te.value===t.id?"Connecting...":"Connect"),9,zl)])]))),128))])]),e("div",{class:"modal-footer"},[e("button",{onClick:Je,class:"btn-secondary"},"Skip"),e("button",{onClick:le,class:"btn-primary"},"Done")])])])):L("",!0)])}}}),Jl=ts(Gl,[["__scopeId","data-v-1a18190c"]]);export{Jl as default};
