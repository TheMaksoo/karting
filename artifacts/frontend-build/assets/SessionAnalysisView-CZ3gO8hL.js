import{d as k,k as w,o,c as n,e as t,g as p,J as m,F as f,n as g,t as l,b as A,f as V,r,l as h}from"./index-BIUjLROW.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"session-analysis"},x={class:"filters-card"},B={class:"filter-group"},F=["value"],M={class:"filter-group"},R=["value"],U={class:"filter-group"},j={class:"stats-grid"},$={class:"stat-card"},E={class:"stat-content"},I={class:"stat-value"},J={class:"stat-card"},P={class:"stat-content"},q={class:"stat-value"},z={class:"stat-card"},G={class:"stat-content"},H={class:"stat-value"},K={class:"stat-card"},O={class:"stat-content"},Q={class:"stat-value"},W={class:"sessions-table-card"},X={class:"table-wrapper"},Y={class:"data-table"},Z={class:"time-cell"},tt={class:"time-cell"},st={class:"session-type-badge"},at=k({__name:"SessionAnalysisView",setup(et){const y=r(""),b=r(""),_=r("30"),T=r([]),L=r([]),v=r([]),d=r({totalSessions:0,totalLaps:0,averageLapTime:0,bestLapTime:0}),S=async()=>{try{T.value=await h.tracks.getAll(),L.value=await h.drivers.getAll();const i=await h.sessions.getAll();v.value=i.data||[],d.value.totalSessions=v.value.length,d.value.totalLaps=v.value.reduce((e,u)=>e+(u.lap_count||0),0);const s=v.value.map(e=>e.avg_lap).filter(e=>e!=null);d.value.averageLapTime=s.length?s.reduce((e,u)=>e+u,0)/s.length:0;const a=v.value.map(e=>e.best_lap).filter(e=>e!=null);d.value.bestLapTime=a.length?Math.min(...a):0}catch(i){console.error("Failed to load session data:",i)}},c=i=>{if(!i)return"N/A";const s=Math.floor(i/60),a=(i%60).toFixed(3);return`${s}:${a.padStart(6,"0")}`},D=i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return w(()=>{S()}),(i,s)=>(o(),n("div",N,[s[21]||(s[21]=t("div",{class:"page-header"},[t("h1",null,"ğŸ“Š Session Analysis"),t("p",{class:"subtitle"},"Detailed analysis of karting sessions and performance metrics")],-1)),t("div",x,[t("div",B,[s[4]||(s[4]=t("label",null,"Track",-1)),p(t("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>y.value=a),class:"select-input"},[s[3]||(s[3]=t("option",{value:""},"All Tracks",-1)),(o(!0),n(f,null,g(T.value,a=>(o(),n("option",{key:a.id,value:a.id},l(a.name),9,F))),128))],512),[[m,y.value]])]),t("div",M,[s[6]||(s[6]=t("label",null,"Driver",-1)),p(t("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>b.value=a),class:"select-input"},[s[5]||(s[5]=t("option",{value:""},"All Drivers",-1)),(o(!0),n(f,null,g(L.value,a=>(o(),n("option",{key:a.id,value:a.id},l(a.name),9,R))),128))],512),[[m,b.value]])]),t("div",U,[s[8]||(s[8]=t("label",null,"Date Range",-1)),p(t("select",{"onUpdate:modelValue":s[2]||(s[2]=a=>_.value=a),class:"select-input"},[...s[7]||(s[7]=[A('<option value="7" data-v-4ef155d4>Last 7 days</option><option value="30" data-v-4ef155d4>Last 30 days</option><option value="90" data-v-4ef155d4>Last 90 days</option><option value="365" data-v-4ef155d4>Last year</option><option value="all" data-v-4ef155d4>All time</option>',5)])],512),[[m,_.value]])]),t("button",{onClick:S,class:"btn-primary"},[...s[9]||(s[9]=[t("span",{class:"btn-icon"},"ğŸ”„",-1),V(" Refresh ",-1)])])]),t("div",j,[t("div",$,[s[11]||(s[11]=t("div",{class:"stat-icon"},"ğŸ",-1)),t("div",E,[t("div",I,l(d.value.totalSessions),1),s[10]||(s[10]=t("div",{class:"stat-label"},"Total Sessions",-1))])]),t("div",J,[s[13]||(s[13]=t("div",{class:"stat-icon"},"â±ï¸",-1)),t("div",P,[t("div",q,l(d.value.totalLaps),1),s[12]||(s[12]=t("div",{class:"stat-label"},"Total Laps",-1))])]),t("div",z,[s[15]||(s[15]=t("div",{class:"stat-icon"},"âš¡",-1)),t("div",G,[t("div",H,l(c(d.value.averageLapTime)),1),s[14]||(s[14]=t("div",{class:"stat-label"},"Avg Lap Time",-1))])]),t("div",K,[s[17]||(s[17]=t("div",{class:"stat-icon"},"ğŸ†",-1)),t("div",O,[t("div",Q,l(c(d.value.bestLapTime)),1),s[16]||(s[16]=t("div",{class:"stat-label"},"Best Lap Time",-1))])])]),s[22]||(s[22]=A('<div class="charts-grid" data-v-4ef155d4><div class="chart-card" data-v-4ef155d4><h3 data-v-4ef155d4>ğŸ“ˆ Session Performance Trend</h3><div class="chart-placeholder" data-v-4ef155d4><div class="chart-icon" data-v-4ef155d4>ğŸ“Š</div><p data-v-4ef155d4>Line chart showing lap time improvements over sessions</p><small data-v-4ef155d4>Chart.js integration ready</small></div></div><div class="chart-card" data-v-4ef155d4><h3 data-v-4ef155d4>ğŸ¯ Consistency Analysis</h3><div class="chart-placeholder" data-v-4ef155d4><div class="chart-icon" data-v-4ef155d4>ğŸ“‰</div><p data-v-4ef155d4>Standard deviation and consistency metrics</p><small data-v-4ef155d4>Chart.js integration ready</small></div></div><div class="chart-card full-width" data-v-4ef155d4><h3 data-v-4ef155d4>ğŸ Session Comparison</h3><div class="chart-placeholder" data-v-4ef155d4><div class="chart-icon" data-v-4ef155d4>ğŸ“Š</div><p data-v-4ef155d4>Compare multiple sessions side-by-side</p><small data-v-4ef155d4>Chart.js integration ready</small></div></div></div>',1)),t("div",W,[s[20]||(s[20]=t("h3",null,"Recent Sessions",-1)),t("div",X,[t("table",Y,[s[19]||(s[19]=t("thead",null,[t("tr",null,[t("th",null,"Date"),t("th",null,"Track"),t("th",null,"Driver"),t("th",null,"Laps"),t("th",null,"Best Time"),t("th",null,"Avg Time"),t("th",null,"Type"),t("th",null,"Actions")])],-1)),t("tbody",null,[(o(!0),n(f,null,g(v.value,a=>{var e,u;return o(),n("tr",{key:a.id},[t("td",null,l(D(a.session_date)),1),t("td",null,l(((e=a.track)==null?void 0:e.name)||"N/A"),1),t("td",null,l(((u=a.driver)==null?void 0:u.name)||"N/A"),1),t("td",null,l(a.lap_count||0),1),t("td",Z,l(c(a.best_lap)),1),t("td",tt,l(c(a.avg_lap)),1),t("td",null,[t("span",st,l(a.session_type||"practice"),1)]),s[18]||(s[18]=t("td",null,[t("button",{class:"btn-icon",title:"View Details"},"ğŸ‘ï¸")],-1))])}),128))])])])])]))}}),dt=C(at,[["__scopeId","data-v-4ef155d4"]]);export{dt as default};
