var _a=Object.defineProperty;var ka=(r,t,e)=>t in r?_a(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var v=(r,t,e)=>ka(r,typeof t!="symbol"?t+"":t,e);import{d as Ee,A as pt,o as u,c as h,e as s,t as m,F as S,n as V,r as C,s as K,i as Q,z as nt,p as $e,T as Da,q as xa,h as _t,B as Nt,a as Ta,k as Ma,C as Ca,D as Se,f as Qe,b as Pa,w as kt,g as Oa,v as Fa,E as Dt,y as xt,G as Tt,l as De}from"./index-BIUjLROW.js";import{T as Ya}from"./TrackMap-BJcx-QW4.js";import{_ as Et}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as $a,C as tt,r as Na}from"./chart-DaPPa1q0.js";import{u as Mt}from"./useKartingAPI-uF34JNNR.js";const Ea={class:"friends-section"},La={class:"section-header"},Aa={key:0,class:"loading-state",role:"status","aria-live":"polite"},Wa={key:1,class:"error-state",role:"alert","aria-live":"assertive"},Ha={class:"error-message"},qa={key:2,class:"empty-state"},Ra={key:3,class:"friends-list",role:"list","aria-labelledby":"friends-section-title"},Ia={class:"friend-info"},Ba=["aria-label"],Sa={class:"friend-details"},Qa={class:"friend-name"},Ga={class:"friend-meta"},za=["onClick","disabled","title","aria-label"],Xa={key:0},Ua={key:1},ja=Ee({__name:"FriendsSection",props:{friends:{},loading:{type:Boolean},error:{}},emits:["add-friend","remove-friend","retry"],setup(r,{emit:t}){const e=r,a=t,n=C(null);pt(()=>e.friends,()=>{n.value=null},{deep:!0}),pt(()=>e.loading,d=>{d||(n.value=null)});const i=d=>{n.value=d,a("remove-friend",d)},c=d=>{const g=new Date(d),M=Math.floor((new Date().getTime()-g.getTime())/(1e3*60*60*24));return M===0?"Today":M===1?"Yesterday":M<7?`${M} days ago`:g.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return(d,g)=>(u(),h("div",Ea,[s("div",La,[g[2]||(g[2]=s("h2",{id:"friends-section-title"},"ðŸ‘¥ Your Racing Crew",-1)),s("button",{onClick:g[0]||(g[0]=b=>d.$emit("add-friend")),class:"btn-primary btn-sm","aria-label":"Add a new friend"}," + Add Friend ")]),r.loading?(u(),h("div",Aa," Loading friends... ")):r.error?(u(),h("div",Wa,[s("p",Ha,"âš ï¸ "+m(r.error),1),s("button",{onClick:g[1]||(g[1]=b=>d.$emit("retry")),class:"btn-secondary btn-sm"},"Retry")])):r.friends.length===0?(u(),h("div",qa,[...g[3]||(g[3]=[s("p",null,"No friends added yet",-1),s("p",{class:"text-muted"},"Add friends to track their stats alongside yours!",-1)])])):(u(),h("div",Ra,[(u(!0),h(S,null,V(r.friends,b=>(u(),h("div",{key:b.id,class:"friend-card",role:"listitem"},[s("div",Ia,[s("div",{class:"friend-avatar","aria-label":`${b.name} avatar`},m(b.name.charAt(0)),9,Ba),s("div",Sa,[s("div",Qa,m(b.name),1),s("div",Ga,"Added "+m(c(b.added_at)),1)])]),s("button",{onClick:M=>i(b.id),disabled:n.value===b.id,class:"btn-icon btn-danger",title:`Remove ${b.name} from friends`,"aria-label":`Remove ${b.name} from friends`},[n.value===b.id?(u(),h("span",Xa,"â³")):(u(),h("span",Ua,"âœ•"))],8,za)]))),128))]))]))}}),Va={class:"activity-section"},Za={key:0,class:"loading-state"},Ka={key:1,class:"empty-state"},Ja={key:2,class:"activity-list"},er={class:"activity-header"},tr={class:"activity-meta"},ar={class:"track-name"},rr={class:"session-date"},nr={class:"activity-results"},sr={class:"driver-name"},or={class:"lap-time"},ir={key:0,class:"more-results"},cr=Ee({__name:"LatestActivity",props:{activities:{},loading:{type:Boolean},userDriverId:{}},setup(r){const t=a=>{const n=new Date(a),c=Math.floor((new Date().getTime()-n.getTime())/(1e3*60*60*24));return c===0?"Today":c===1?"Yesterday":c<7?`${c} days ago`:n.toLocaleDateString("en-US",{month:"short",day:"numeric"})},e=a=>{if(!a)return"-";const n=Math.floor(a/60),i=(a%60).toFixed(3);return n>0?`${n}:${i.padStart(6,"0")}`:`${i}s`};return(a,n)=>(u(),h("div",Va,[n[2]||(n[2]=s("div",{class:"section-header"},[s("h2",null,"ðŸ† Latest Activity")],-1)),r.loading?(u(),h("div",Za,"Loading activity...")):r.activities.length===0?(u(),h("div",Ka,[...n[0]||(n[0]=[s("p",null,"No recent activity",-1),s("p",{class:"text-muted"},"Start racing to see your results here!",-1)])])):(u(),h("div",Ja,[(u(!0),h(S,null,V(r.activities,i=>(u(),h("div",{key:i.session_id,class:"activity-card"},[s("div",er,[n[1]||(n[1]=s("div",{class:"track-icon"},"ðŸ",-1)),s("div",tr,[s("div",ar,m(i.track_name),1),s("div",rr,m(t(i.session_date)),1)])]),s("div",nr,[(u(!0),h(S,null,V(i.results.slice(0,3),c=>(u(),h("div",{key:c.driver_id,class:K(["result-item",{"is-highlight":c.driver_id===r.userDriverId}])},[s("div",{class:K(["position-badge",`position-${c.position}`])},m(c.position===1?"ðŸ¥‡":c.position===2?"ðŸ¥ˆ":c.position===3?"ðŸ¥‰":`#${c.position}`),3),s("div",sr,m(c.driver_name),1),s("div",or,m(e(c.best_lap_time)),1)],2))),128)),i.results.length>3?(u(),h("div",ir," +"+m(i.results.length-3)+" more drivers ",1)):Q("",!0)])]))),128))]))]))}}),lr={class:"quick-stats-section"},ur={class:"stats-grid"},dr=["title"],fr={class:"stat-icon"},hr={class:"stat-content"},mr={class:"stat-value"},vr={class:"stat-label"},gr=Ee({__name:"QuickStats",props:{stats:{}},setup(r){return(t,e)=>(u(),h("div",lr,[e[0]||(e[0]=s("h2",{class:"section-title"},"ðŸ“Š Quick Stats",-1)),s("div",ur,[(u(!0),h(S,null,V(r.stats,(a,n)=>(u(),h("div",{key:n,class:"stat-card",title:a.tooltip},[s("div",fr,m(a.icon),1),s("div",hr,[s("div",mr,m(a.value),1),s("div",vr,m(a.label),1)])],8,dr))),128))])]))}}),Ge=C([]);let yr=1;function Lt(){const r=(c,d="info",g=3e3)=>{const b=yr++,M={id:b,message:c,type:d,duration:g};return Ge.value.push(M),g>0&&setTimeout(()=>{t(b)},g),b},t=c=>{const d=Ge.value.findIndex(g=>g.id===c);d>-1&&Ge.value.splice(d,1)};return{toasts:Ge,showToast:r,removeToast:t,success:(c,d)=>r(c,"success",d),error:(c,d)=>r(c,"error",d),info:(c,d)=>r(c,"info",d),warning:(c,d)=>r(c,"warning",d)}}const wr={class:"toast-container","aria-live":"polite","aria-atomic":"true"},br={class:"toast-icon"},pr={class:"toast-message"},_r=["onClick"],kr=Ee({__name:"ToastContainer",setup(r){const{toasts:t,removeToast:e}=Lt(),a=n=>{switch(n){case"success":return"âœ“";case"error":return"âš ï¸";case"warning":return"âš ";case"info":return"â„¹";default:return"â„¹"}};return(n,i)=>(u(),nt(Nt,{to:"body"},[s("div",wr,[$e(Da,{name:"toast"},{default:xa(()=>[(u(!0),h(S,null,V(_t(t),c=>(u(),h("div",{key:c.id,class:K(["toast",`toast-${c.type}`]),role:"alert"},[s("span",br,m(a(c.type)),1),s("span",pr,m(c.message),1),s("button",{onClick:d=>_t(e)(c.id),class:"toast-close","aria-label":"Close notification"}," âœ• ",8,_r)],2))),128))]),_:1})])]))}}),Dr=Et(kr,[["__scopeId","data-v-4f91eb4b"]]),At=6048e5,xr=864e5,Le=6e4,Ae=36e5,Tr=1e3,Ct=Symbol.for("constructDateFrom");function E(r,t){return typeof r=="function"?r(t):r&&typeof r=="object"&&Ct in r?r[Ct](t):r instanceof Date?new r.constructor(t):new Date(t)}function _(r,t){return E(t||r,r)}function je(r,t,e){const a=_(r,e==null?void 0:e.in);return isNaN(t)?E((e==null?void 0:e.in)||r,NaN):(t&&a.setDate(a.getDate()+t),a)}function ct(r,t,e){const a=_(r,e==null?void 0:e.in);if(isNaN(t))return E(r,NaN);if(!t)return a;const n=a.getDate(),i=E(r,a.getTime());i.setMonth(a.getMonth()+t+1,0);const c=i.getDate();return n>=c?i:(a.setFullYear(i.getFullYear(),i.getMonth(),n),a)}function lt(r,t,e){return E(r,+_(r)+t)}function Mr(r,t,e){return lt(r,t*Ae)}let Cr={};function pe(){return Cr}function de(r,t){var d,g,b,M;const e=pe(),a=(t==null?void 0:t.weekStartsOn)??((g=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:g.weekStartsOn)??e.weekStartsOn??((M=(b=e.locale)==null?void 0:b.options)==null?void 0:M.weekStartsOn)??0,n=_(r,t==null?void 0:t.in),i=n.getDay(),c=(i<a?7:0)+i-a;return n.setDate(n.getDate()-c),n.setHours(0,0,0,0),n}function Te(r,t){return de(r,{...t,weekStartsOn:1})}function Wt(r,t){const e=_(r,t==null?void 0:t.in),a=e.getFullYear(),n=E(e,0);n.setFullYear(a+1,0,4),n.setHours(0,0,0,0);const i=Te(n),c=E(e,0);c.setFullYear(a,0,4),c.setHours(0,0,0,0);const d=Te(c);return e.getTime()>=i.getTime()?a+1:e.getTime()>=d.getTime()?a:a-1}function Xe(r){const t=_(r),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+r-+e}function _e(r,...t){const e=E.bind(null,t.find(a=>typeof a=="object"));return t.map(e)}function st(r,t){const e=_(r,t==null?void 0:t.in);return e.setHours(0,0,0,0),e}function Ht(r,t,e){const[a,n]=_e(e==null?void 0:e.in,r,t),i=st(a),c=st(n),d=+i-Xe(i),g=+c-Xe(c);return Math.round((d-g)/xr)}function Pr(r,t){const e=Wt(r,t),a=E(r,0);return a.setFullYear(e,0,4),a.setHours(0,0,0,0),Te(a)}function Or(r,t,e){const a=_(r,e==null?void 0:e.in);return a.setTime(a.getTime()+t*Le),a}function Fr(r,t,e){return ct(r,t*3,e)}function Yr(r,t,e){return lt(r,t*1e3)}function $r(r,t,e){return je(r,t*7,e)}function Nr(r,t,e){return ct(r,t*12,e)}function Ne(r,t){const e=+_(r)-+_(t);return e<0?-1:e>0?1:e}function Er(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function qt(r){return!(!Er(r)&&typeof r!="number"||isNaN(+_(r)))}function Lr(r,t,e){const[a,n]=_e(e==null?void 0:e.in,r,t),i=a.getFullYear()-n.getFullYear(),c=a.getMonth()-n.getMonth();return i*12+c}function Ar(r,t,e){const[a,n]=_e(e==null?void 0:e.in,r,t);return a.getFullYear()-n.getFullYear()}function Rt(r,t,e){const[a,n]=_e(e==null?void 0:e.in,r,t),i=Pt(a,n),c=Math.abs(Ht(a,n));a.setDate(a.getDate()-i*c);const d=+(Pt(a,n)===-i),g=i*(c-d);return g===0?0:g}function Pt(r,t){const e=r.getFullYear()-t.getFullYear()||r.getMonth()-t.getMonth()||r.getDate()-t.getDate()||r.getHours()-t.getHours()||r.getMinutes()-t.getMinutes()||r.getSeconds()-t.getSeconds()||r.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function We(r){return t=>{const a=(r?Math[r]:Math.trunc)(t);return a===0?0:a}}function Wr(r,t,e){const[a,n]=_e(e==null?void 0:e.in,r,t),i=(+a-+n)/Ae;return We(e==null?void 0:e.roundingMethod)(i)}function ut(r,t){return+_(r)-+_(t)}function Hr(r,t,e){const a=ut(r,t)/Le;return We(e==null?void 0:e.roundingMethod)(a)}function It(r,t){const e=_(r,t==null?void 0:t.in);return e.setHours(23,59,59,999),e}function Bt(r,t){const e=_(r,t==null?void 0:t.in),a=e.getMonth();return e.setFullYear(e.getFullYear(),a+1,0),e.setHours(23,59,59,999),e}function qr(r,t){const e=_(r,t==null?void 0:t.in);return+It(e,t)==+Bt(e,t)}function St(r,t,e){const[a,n,i]=_e(e==null?void 0:e.in,r,r,t),c=Ne(n,i),d=Math.abs(Lr(n,i));if(d<1)return 0;n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-c*d);let g=Ne(n,i)===-c;qr(a)&&d===1&&Ne(a,i)===1&&(g=!1);const b=c*(d-+g);return b===0?0:b}function Rr(r,t,e){const a=St(r,t,e)/3;return We(e==null?void 0:e.roundingMethod)(a)}function Ir(r,t,e){const a=ut(r,t)/1e3;return We(e==null?void 0:e.roundingMethod)(a)}function Br(r,t,e){const a=Rt(r,t,e)/7;return We(e==null?void 0:e.roundingMethod)(a)}function Sr(r,t,e){const[a,n]=_e(e==null?void 0:e.in,r,t),i=Ne(a,n),c=Math.abs(Ar(a,n));a.setFullYear(1584),n.setFullYear(1584);const d=Ne(a,n)===-i,g=i*(c-+d);return g===0?0:g}function Qr(r,t){const e=_(r,t==null?void 0:t.in),a=e.getMonth(),n=a-a%3;return e.setMonth(n,1),e.setHours(0,0,0,0),e}function Gr(r,t){const e=_(r,t==null?void 0:t.in);return e.setDate(1),e.setHours(0,0,0,0),e}function zr(r,t){const e=_(r,t==null?void 0:t.in),a=e.getFullYear();return e.setFullYear(a+1,0,0),e.setHours(23,59,59,999),e}function Qt(r,t){const e=_(r,t==null?void 0:t.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}function Xr(r,t){const e=_(r,t==null?void 0:t.in);return e.setMinutes(59,59,999),e}function Ur(r,t){var d,g;const e=pe(),a=e.weekStartsOn??((g=(d=e.locale)==null?void 0:d.options)==null?void 0:g.weekStartsOn)??0,n=_(r,t==null?void 0:t.in),i=n.getDay(),c=(i<a?-7:0)+6-(i-a);return n.setDate(n.getDate()+c),n.setHours(23,59,59,999),n}function jr(r,t){const e=_(r,t==null?void 0:t.in);return e.setSeconds(59,999),e}function Vr(r,t){const e=_(r,t==null?void 0:t.in),a=e.getMonth(),n=a-a%3+3;return e.setMonth(n,0),e.setHours(23,59,59,999),e}function Zr(r,t){const e=_(r,t==null?void 0:t.in);return e.setMilliseconds(999),e}const Kr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Jr=(r,t,e)=>{let a;const n=Kr[r];return typeof n=="string"?a=n:t===1?a=n.one:a=n.other.replace("{{count}}",t.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+a:a+" ago":a};function at(r){return(t={})=>{const e=t.width?String(t.width):r.defaultWidth;return r.formats[e]||r.formats[r.defaultWidth]}}const en={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},tn={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},an={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},rn={date:at({formats:en,defaultWidth:"full"}),time:at({formats:tn,defaultWidth:"full"}),dateTime:at({formats:an,defaultWidth:"full"})},nn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},sn=(r,t,e,a)=>nn[r];function Oe(r){return(t,e)=>{const a=e!=null&&e.context?String(e.context):"standalone";let n;if(a==="formatting"&&r.formattingValues){const c=r.defaultFormattingWidth||r.defaultWidth,d=e!=null&&e.width?String(e.width):c;n=r.formattingValues[d]||r.formattingValues[c]}else{const c=r.defaultWidth,d=e!=null&&e.width?String(e.width):r.defaultWidth;n=r.values[d]||r.values[c]}const i=r.argumentCallback?r.argumentCallback(t):t;return n[i]}}const on={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},cn={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ln={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},un={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},fn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},hn=(r,t)=>{const e=Number(r),a=e%100;if(a>20||a<10)switch(a%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},mn={ordinalNumber:hn,era:Oe({values:on,defaultWidth:"wide"}),quarter:Oe({values:cn,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Oe({values:ln,defaultWidth:"wide"}),day:Oe({values:un,defaultWidth:"wide"}),dayPeriod:Oe({values:dn,defaultWidth:"wide",formattingValues:fn,defaultFormattingWidth:"wide"})};function Fe(r){return(t,e={})=>{const a=e.width,n=a&&r.matchPatterns[a]||r.matchPatterns[r.defaultMatchWidth],i=t.match(n);if(!i)return null;const c=i[0],d=a&&r.parsePatterns[a]||r.parsePatterns[r.defaultParseWidth],g=Array.isArray(d)?gn(d,q=>q.test(c)):vn(d,q=>q.test(c));let b;b=r.valueCallback?r.valueCallback(g):g,b=e.valueCallback?e.valueCallback(b):b;const M=t.slice(c.length);return{value:b,rest:M}}}function vn(r,t){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)&&t(r[e]))return e}function gn(r,t){for(let e=0;e<r.length;e++)if(t(r[e]))return e}function yn(r){return(t,e={})=>{const a=t.match(r.matchPattern);if(!a)return null;const n=a[0],i=t.match(r.parsePattern);if(!i)return null;let c=r.valueCallback?r.valueCallback(i[0]):i[0];c=e.valueCallback?e.valueCallback(c):c;const d=t.slice(n.length);return{value:c,rest:d}}}const wn=/^(\d+)(th|st|nd|rd)?/i,bn=/\d+/i,pn={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},_n={any:[/^b/i,/^(a|c)/i]},kn={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Dn={any:[/1/i,/2/i,/3/i,/4/i]},xn={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Tn={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Mn={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Cn={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Pn={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},On={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Fn={ordinalNumber:yn({matchPattern:wn,parsePattern:bn,valueCallback:r=>parseInt(r,10)}),era:Fe({matchPatterns:pn,defaultMatchWidth:"wide",parsePatterns:_n,defaultParseWidth:"any"}),quarter:Fe({matchPatterns:kn,defaultMatchWidth:"wide",parsePatterns:Dn,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Fe({matchPatterns:xn,defaultMatchWidth:"wide",parsePatterns:Tn,defaultParseWidth:"any"}),day:Fe({matchPatterns:Mn,defaultMatchWidth:"wide",parsePatterns:Cn,defaultParseWidth:"any"}),dayPeriod:Fe({matchPatterns:Pn,defaultMatchWidth:"any",parsePatterns:On,defaultParseWidth:"any"})},Gt={code:"en-US",formatDistance:Jr,formatLong:rn,formatRelative:sn,localize:mn,match:Fn,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Yn(r,t){const e=_(r,t==null?void 0:t.in);return Ht(e,Qt(e))+1}function zt(r,t){const e=_(r,t==null?void 0:t.in),a=+Te(e)-+Pr(e);return Math.round(a/At)+1}function dt(r,t){var M,q,R,z;const e=_(r,t==null?void 0:t.in),a=e.getFullYear(),n=pe(),i=(t==null?void 0:t.firstWeekContainsDate)??((q=(M=t==null?void 0:t.locale)==null?void 0:M.options)==null?void 0:q.firstWeekContainsDate)??n.firstWeekContainsDate??((z=(R=n.locale)==null?void 0:R.options)==null?void 0:z.firstWeekContainsDate)??1,c=E((t==null?void 0:t.in)||r,0);c.setFullYear(a+1,0,i),c.setHours(0,0,0,0);const d=de(c,t),g=E((t==null?void 0:t.in)||r,0);g.setFullYear(a,0,i),g.setHours(0,0,0,0);const b=de(g,t);return+e>=+d?a+1:+e>=+b?a:a-1}function $n(r,t){var d,g,b,M;const e=pe(),a=(t==null?void 0:t.firstWeekContainsDate)??((g=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:g.firstWeekContainsDate)??e.firstWeekContainsDate??((M=(b=e.locale)==null?void 0:b.options)==null?void 0:M.firstWeekContainsDate)??1,n=dt(r,t),i=E((t==null?void 0:t.in)||r,0);return i.setFullYear(n,0,a),i.setHours(0,0,0,0),de(i,t)}function Xt(r,t){const e=_(r,t==null?void 0:t.in),a=+de(e,t)-+$n(e,t);return Math.round(a/At)+1}function F(r,t){const e=r<0?"-":"",a=Math.abs(r).toString().padStart(t,"0");return e+a}const ge={y(r,t){const e=r.getFullYear(),a=e>0?e:1-e;return F(t==="yy"?a%100:a,t.length)},M(r,t){const e=r.getMonth();return t==="M"?String(e+1):F(e+1,2)},d(r,t){return F(r.getDate(),t.length)},a(r,t){const e=r.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(r,t){return F(r.getHours()%12||12,t.length)},H(r,t){return F(r.getHours(),t.length)},m(r,t){return F(r.getMinutes(),t.length)},s(r,t){return F(r.getSeconds(),t.length)},S(r,t){const e=t.length,a=r.getMilliseconds(),n=Math.trunc(a*Math.pow(10,e-3));return F(n,t.length)}},xe={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ot={G:function(r,t,e){const a=r.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(a,{width:"abbreviated"});case"GGGGG":return e.era(a,{width:"narrow"});case"GGGG":default:return e.era(a,{width:"wide"})}},y:function(r,t,e){if(t==="yo"){const a=r.getFullYear(),n=a>0?a:1-a;return e.ordinalNumber(n,{unit:"year"})}return ge.y(r,t)},Y:function(r,t,e,a){const n=dt(r,a),i=n>0?n:1-n;if(t==="YY"){const c=i%100;return F(c,2)}return t==="Yo"?e.ordinalNumber(i,{unit:"year"}):F(i,t.length)},R:function(r,t){const e=Wt(r);return F(e,t.length)},u:function(r,t){const e=r.getFullYear();return F(e,t.length)},Q:function(r,t,e){const a=Math.ceil((r.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return F(a,2);case"Qo":return e.ordinalNumber(a,{unit:"quarter"});case"QQQ":return e.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(a,{width:"wide",context:"formatting"})}},q:function(r,t,e){const a=Math.ceil((r.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return F(a,2);case"qo":return e.ordinalNumber(a,{unit:"quarter"});case"qqq":return e.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(a,{width:"wide",context:"standalone"})}},M:function(r,t,e){const a=r.getMonth();switch(t){case"M":case"MM":return ge.M(r,t);case"Mo":return e.ordinalNumber(a+1,{unit:"month"});case"MMM":return e.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(a,{width:"wide",context:"formatting"})}},L:function(r,t,e){const a=r.getMonth();switch(t){case"L":return String(a+1);case"LL":return F(a+1,2);case"Lo":return e.ordinalNumber(a+1,{unit:"month"});case"LLL":return e.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(a,{width:"wide",context:"standalone"})}},w:function(r,t,e,a){const n=Xt(r,a);return t==="wo"?e.ordinalNumber(n,{unit:"week"}):F(n,t.length)},I:function(r,t,e){const a=zt(r);return t==="Io"?e.ordinalNumber(a,{unit:"week"}):F(a,t.length)},d:function(r,t,e){return t==="do"?e.ordinalNumber(r.getDate(),{unit:"date"}):ge.d(r,t)},D:function(r,t,e){const a=Yn(r);return t==="Do"?e.ordinalNumber(a,{unit:"dayOfYear"}):F(a,t.length)},E:function(r,t,e){const a=r.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(a,{width:"short",context:"formatting"});case"EEEE":default:return e.day(a,{width:"wide",context:"formatting"})}},e:function(r,t,e,a){const n=r.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return F(i,2);case"eo":return e.ordinalNumber(i,{unit:"day"});case"eee":return e.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(n,{width:"short",context:"formatting"});case"eeee":default:return e.day(n,{width:"wide",context:"formatting"})}},c:function(r,t,e,a){const n=r.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return F(i,t.length);case"co":return e.ordinalNumber(i,{unit:"day"});case"ccc":return e.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(n,{width:"narrow",context:"standalone"});case"cccccc":return e.day(n,{width:"short",context:"standalone"});case"cccc":default:return e.day(n,{width:"wide",context:"standalone"})}},i:function(r,t,e){const a=r.getDay(),n=a===0?7:a;switch(t){case"i":return String(n);case"ii":return F(n,t.length);case"io":return e.ordinalNumber(n,{unit:"day"});case"iii":return e.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(a,{width:"short",context:"formatting"});case"iiii":default:return e.day(a,{width:"wide",context:"formatting"})}},a:function(r,t,e){const n=r.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(r,t,e){const a=r.getHours();let n;switch(a===12?n=xe.noon:a===0?n=xe.midnight:n=a/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(r,t,e){const a=r.getHours();let n;switch(a>=17?n=xe.evening:a>=12?n=xe.afternoon:a>=4?n=xe.morning:n=xe.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(r,t,e){if(t==="ho"){let a=r.getHours()%12;return a===0&&(a=12),e.ordinalNumber(a,{unit:"hour"})}return ge.h(r,t)},H:function(r,t,e){return t==="Ho"?e.ordinalNumber(r.getHours(),{unit:"hour"}):ge.H(r,t)},K:function(r,t,e){const a=r.getHours()%12;return t==="Ko"?e.ordinalNumber(a,{unit:"hour"}):F(a,t.length)},k:function(r,t,e){let a=r.getHours();return a===0&&(a=24),t==="ko"?e.ordinalNumber(a,{unit:"hour"}):F(a,t.length)},m:function(r,t,e){return t==="mo"?e.ordinalNumber(r.getMinutes(),{unit:"minute"}):ge.m(r,t)},s:function(r,t,e){return t==="so"?e.ordinalNumber(r.getSeconds(),{unit:"second"}):ge.s(r,t)},S:function(r,t){return ge.S(r,t)},X:function(r,t,e){const a=r.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return Yt(a);case"XXXX":case"XX":return be(a);case"XXXXX":case"XXX":default:return be(a,":")}},x:function(r,t,e){const a=r.getTimezoneOffset();switch(t){case"x":return Yt(a);case"xxxx":case"xx":return be(a);case"xxxxx":case"xxx":default:return be(a,":")}},O:function(r,t,e){const a=r.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ft(a,":");case"OOOO":default:return"GMT"+be(a,":")}},z:function(r,t,e){const a=r.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ft(a,":");case"zzzz":default:return"GMT"+be(a,":")}},t:function(r,t,e){const a=Math.trunc(+r/1e3);return F(a,t.length)},T:function(r,t,e){return F(+r,t.length)}};function Ft(r,t=""){const e=r>0?"-":"+",a=Math.abs(r),n=Math.trunc(a/60),i=a%60;return i===0?e+String(n):e+String(n)+t+F(i,2)}function Yt(r,t){return r%60===0?(r>0?"-":"+")+F(Math.abs(r)/60,2):be(r,t)}function be(r,t=""){const e=r>0?"-":"+",a=Math.abs(r),n=F(Math.trunc(a/60),2),i=F(a%60,2);return e+n+t+i}const $t=(r,t)=>{switch(r){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Ut=(r,t)=>{switch(r){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Nn=(r,t)=>{const e=r.match(/(P+)(p+)?/)||[],a=e[1],n=e[2];if(!n)return $t(r,t);let i;switch(a){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",$t(a,t)).replace("{{time}}",Ut(n,t))},ot={p:Ut,P:Nn},En=/^D+$/,Ln=/^Y+$/,An=["D","DD","YY","YYYY"];function jt(r){return En.test(r)}function Vt(r){return Ln.test(r)}function it(r,t,e){const a=Wn(r,t,e);if(console.warn(a),An.includes(r))throw new RangeError(a)}function Wn(r,t,e){const a=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${t}\`) for formatting ${a} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Hn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,qn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Rn=/^'([^]*?)'?$/,In=/''/g,Bn=/[a-zA-Z]/;function Sn(r,t,e){var M,q,R,z,X,fe,ne,se;const a=pe(),n=(e==null?void 0:e.locale)??a.locale??Gt,i=(e==null?void 0:e.firstWeekContainsDate)??((q=(M=e==null?void 0:e.locale)==null?void 0:M.options)==null?void 0:q.firstWeekContainsDate)??a.firstWeekContainsDate??((z=(R=a.locale)==null?void 0:R.options)==null?void 0:z.firstWeekContainsDate)??1,c=(e==null?void 0:e.weekStartsOn)??((fe=(X=e==null?void 0:e.locale)==null?void 0:X.options)==null?void 0:fe.weekStartsOn)??a.weekStartsOn??((se=(ne=a.locale)==null?void 0:ne.options)==null?void 0:se.weekStartsOn)??0,d=_(r,e==null?void 0:e.in);if(!qt(d))throw new RangeError("Invalid time value");let g=t.match(qn).map(I=>{const A=I[0];if(A==="p"||A==="P"){const J=ot[A];return J(I,n.formatLong)}return I}).join("").match(Hn).map(I=>{if(I==="''")return{isToken:!1,value:"'"};const A=I[0];if(A==="'")return{isToken:!1,value:Qn(I)};if(Ot[A])return{isToken:!0,value:I};if(A.match(Bn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`");return{isToken:!1,value:I}});n.localize.preprocessor&&(g=n.localize.preprocessor(d,g));const b={firstWeekContainsDate:i,weekStartsOn:c,locale:n};return g.map(I=>{if(!I.isToken)return I.value;const A=I.value;(!(e!=null&&e.useAdditionalWeekYearTokens)&&Vt(A)||!(e!=null&&e.useAdditionalDayOfYearTokens)&&jt(A))&&it(A,t,String(r));const J=Ot[A[0]];return J(d,A,n.localize,b)}).join("")}function Qn(r){const t=r.match(Rn);return t?t[1].replace(In,"'"):r}function Gn(){return Object.assign({},pe())}function zn(r,t){const e=_(r,t==null?void 0:t.in).getDay();return e===0?7:e}function Xn(r,t){const e=Un(t)?new t(0):E(t,0);return e.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()),e.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),e}function Un(r){var t;return typeof r=="function"&&((t=r.prototype)==null?void 0:t.constructor)===r}const jn=10;class Zt{constructor(){v(this,"subPriority",0)}validate(t,e){return!0}}class Vn extends Zt{constructor(t,e,a,n,i){super(),this.value=t,this.validateValue=e,this.setValue=a,this.priority=n,i&&(this.subPriority=i)}validate(t,e){return this.validateValue(t,this.value,e)}set(t,e,a){return this.setValue(t,e,this.value,a)}}class Zn extends Zt{constructor(e,a){super();v(this,"priority",jn);v(this,"subPriority",-1);this.context=e||(n=>E(a,n))}set(e,a){return a.timestampIsSet?e:E(e,Xn(e,this.context))}}class O{run(t,e,a,n){const i=this.parse(t,e,a,n);return i?{setter:new Vn(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(t,e,a){return!0}}class Kn extends O{constructor(){super(...arguments);v(this,"priority",140);v(this,"incompatibleTokens",["R","u","t","T"])}parse(e,a,n){switch(a){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});case"GGGG":default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}set(e,a,n){return a.era=n,e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}}const W={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},le={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function H(r,t){return r&&{value:t(r.value),rest:r.rest}}function $(r,t){const e=t.match(r);return e?{value:parseInt(e[0],10),rest:t.slice(e[0].length)}:null}function ue(r,t){const e=t.match(r);if(!e)return null;if(e[0]==="Z")return{value:0,rest:t.slice(1)};const a=e[1]==="+"?1:-1,n=e[2]?parseInt(e[2],10):0,i=e[3]?parseInt(e[3],10):0,c=e[5]?parseInt(e[5],10):0;return{value:a*(n*Ae+i*Le+c*Tr),rest:t.slice(e[0].length)}}function Kt(r){return $(W.anyDigitsSigned,r)}function L(r,t){switch(r){case 1:return $(W.singleDigit,t);case 2:return $(W.twoDigits,t);case 3:return $(W.threeDigits,t);case 4:return $(W.fourDigits,t);default:return $(new RegExp("^\\d{1,"+r+"}"),t)}}function Ue(r,t){switch(r){case 1:return $(W.singleDigitSigned,t);case 2:return $(W.twoDigitsSigned,t);case 3:return $(W.threeDigitsSigned,t);case 4:return $(W.fourDigitsSigned,t);default:return $(new RegExp("^-?\\d{1,"+r+"}"),t)}}function ft(r){switch(r){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Jt(r,t){const e=t>0,a=e?t:1-t;let n;if(a<=50)n=r||100;else{const i=a+50,c=Math.trunc(i/100)*100,d=r>=i%100;n=r+c-(d?100:0)}return e?n:1-n}function ea(r){return r%400===0||r%4===0&&r%100!==0}class Jn extends O{constructor(){super(...arguments);v(this,"priority",130);v(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,a,n){const i=c=>({year:c,isTwoDigitYear:a==="yy"});switch(a){case"y":return H(L(4,e),i);case"yo":return H(n.ordinalNumber(e,{unit:"year"}),i);default:return H(L(a.length,e),i)}}validate(e,a){return a.isTwoDigitYear||a.year>0}set(e,a,n){const i=e.getFullYear();if(n.isTwoDigitYear){const d=Jt(n.year,i);return e.setFullYear(d,0,1),e.setHours(0,0,0,0),e}const c=!("era"in a)||a.era===1?n.year:1-n.year;return e.setFullYear(c,0,1),e.setHours(0,0,0,0),e}}class es extends O{constructor(){super(...arguments);v(this,"priority",130);v(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,a,n){const i=c=>({year:c,isTwoDigitYear:a==="YY"});switch(a){case"Y":return H(L(4,e),i);case"Yo":return H(n.ordinalNumber(e,{unit:"year"}),i);default:return H(L(a.length,e),i)}}validate(e,a){return a.isTwoDigitYear||a.year>0}set(e,a,n,i){const c=dt(e,i);if(n.isTwoDigitYear){const g=Jt(n.year,c);return e.setFullYear(g,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),de(e,i)}const d=!("era"in a)||a.era===1?n.year:1-n.year;return e.setFullYear(d,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),de(e,i)}}class ts extends O{constructor(){super(...arguments);v(this,"priority",130);v(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,a){return Ue(a==="R"?4:a.length,e)}set(e,a,n){const i=E(e,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),Te(i)}}class as extends O{constructor(){super(...arguments);v(this,"priority",130);v(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,a){return Ue(a==="u"?4:a.length,e)}set(e,a,n){return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}}class rs extends O{constructor(){super(...arguments);v(this,"priority",120);v(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,a,n){switch(a){case"Q":case"QQ":return L(a.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,a){return a>=1&&a<=4}set(e,a,n){return e.setMonth((n-1)*3,1),e.setHours(0,0,0,0),e}}class ns extends O{constructor(){super(...arguments);v(this,"priority",120);v(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,a,n){switch(a){case"q":case"qq":return L(a.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,a){return a>=1&&a<=4}set(e,a,n){return e.setMonth((n-1)*3,1),e.setHours(0,0,0,0),e}}class ss extends O{constructor(){super(...arguments);v(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);v(this,"priority",110)}parse(e,a,n){const i=c=>c-1;switch(a){case"M":return H($(W.month,e),i);case"MM":return H(L(2,e),i);case"Mo":return H(n.ordinalNumber(e,{unit:"month"}),i);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}validate(e,a){return a>=0&&a<=11}set(e,a,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}}class os extends O{constructor(){super(...arguments);v(this,"priority",110);v(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,a,n){const i=c=>c-1;switch(a){case"L":return H($(W.month,e),i);case"LL":return H(L(2,e),i);case"Lo":return H(n.ordinalNumber(e,{unit:"month"}),i);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}validate(e,a){return a>=0&&a<=11}set(e,a,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}}function is(r,t,e){const a=_(r,e==null?void 0:e.in),n=Xt(a,e)-t;return a.setDate(a.getDate()-n*7),_(a,e==null?void 0:e.in)}class cs extends O{constructor(){super(...arguments);v(this,"priority",100);v(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,a,n){switch(a){case"w":return $(W.week,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return L(a.length,e)}}validate(e,a){return a>=1&&a<=53}set(e,a,n,i){return de(is(e,n,i),i)}}function ls(r,t,e){const a=_(r,e==null?void 0:e.in),n=zt(a,e)-t;return a.setDate(a.getDate()-n*7),a}class us extends O{constructor(){super(...arguments);v(this,"priority",100);v(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,a,n){switch(a){case"I":return $(W.week,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return L(a.length,e)}}validate(e,a){return a>=1&&a<=53}set(e,a,n){return Te(ls(e,n))}}const ds=[31,28,31,30,31,30,31,31,30,31,30,31],fs=[31,29,31,30,31,30,31,31,30,31,30,31];class hs extends O{constructor(){super(...arguments);v(this,"priority",90);v(this,"subPriority",1);v(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,a,n){switch(a){case"d":return $(W.date,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return L(a.length,e)}}validate(e,a){const n=e.getFullYear(),i=ea(n),c=e.getMonth();return i?a>=1&&a<=fs[c]:a>=1&&a<=ds[c]}set(e,a,n){return e.setDate(n),e.setHours(0,0,0,0),e}}class ms extends O{constructor(){super(...arguments);v(this,"priority",90);v(this,"subpriority",1);v(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,a,n){switch(a){case"D":case"DD":return $(W.dayOfYear,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return L(a.length,e)}}validate(e,a){const n=e.getFullYear();return ea(n)?a>=1&&a<=366:a>=1&&a<=365}set(e,a,n){return e.setMonth(0,n),e.setHours(0,0,0,0),e}}function ht(r,t,e){var q,R,z,X;const a=pe(),n=(e==null?void 0:e.weekStartsOn)??((R=(q=e==null?void 0:e.locale)==null?void 0:q.options)==null?void 0:R.weekStartsOn)??a.weekStartsOn??((X=(z=a.locale)==null?void 0:z.options)==null?void 0:X.weekStartsOn)??0,i=_(r,e==null?void 0:e.in),c=i.getDay(),g=(t%7+7)%7,b=7-n,M=t<0||t>6?t-(c+b)%7:(g+b)%7-(c+b)%7;return je(i,M,e)}class vs extends O{constructor(){super(...arguments);v(this,"priority",90);v(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,a,n){switch(a){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,a){return a>=0&&a<=6}set(e,a,n,i){return e=ht(e,n,i),e.setHours(0,0,0,0),e}}class gs extends O{constructor(){super(...arguments);v(this,"priority",90);v(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,a,n,i){const c=d=>{const g=Math.floor((d-1)/7)*7;return(d+i.weekStartsOn+6)%7+g};switch(a){case"e":case"ee":return H(L(a.length,e),c);case"eo":return H(n.ordinalNumber(e,{unit:"day"}),c);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,a){return a>=0&&a<=6}set(e,a,n,i){return e=ht(e,n,i),e.setHours(0,0,0,0),e}}class ys extends O{constructor(){super(...arguments);v(this,"priority",90);v(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,a,n,i){const c=d=>{const g=Math.floor((d-1)/7)*7;return(d+i.weekStartsOn+6)%7+g};switch(a){case"c":case"cc":return H(L(a.length,e),c);case"co":return H(n.ordinalNumber(e,{unit:"day"}),c);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}validate(e,a){return a>=0&&a<=6}set(e,a,n,i){return e=ht(e,n,i),e.setHours(0,0,0,0),e}}function ws(r,t,e){const a=_(r,e==null?void 0:e.in),n=zn(a,e),i=t-n;return je(a,i,e)}class bs extends O{constructor(){super(...arguments);v(this,"priority",90);v(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,a,n){const i=c=>c===0?7:c;switch(a){case"i":case"ii":return L(a.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return H(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),i);case"iiiii":return H(n.day(e,{width:"narrow",context:"formatting"}),i);case"iiiiii":return H(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),i);case"iiii":default:return H(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),i)}}validate(e,a){return a>=1&&a<=7}set(e,a,n){return e=ws(e,n),e.setHours(0,0,0,0),e}}class ps extends O{constructor(){super(...arguments);v(this,"priority",80);v(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,a,n){switch(a){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,a,n){return e.setHours(ft(n),0,0,0),e}}class _s extends O{constructor(){super(...arguments);v(this,"priority",80);v(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,a,n){switch(a){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,a,n){return e.setHours(ft(n),0,0,0),e}}class ks extends O{constructor(){super(...arguments);v(this,"priority",80);v(this,"incompatibleTokens",["a","b","t","T"])}parse(e,a,n){switch(a){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,a,n){return e.setHours(ft(n),0,0,0),e}}class Ds extends O{constructor(){super(...arguments);v(this,"priority",70);v(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,a,n){switch(a){case"h":return $(W.hour12h,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return L(a.length,e)}}validate(e,a){return a>=1&&a<=12}set(e,a,n){const i=e.getHours()>=12;return i&&n<12?e.setHours(n+12,0,0,0):!i&&n===12?e.setHours(0,0,0,0):e.setHours(n,0,0,0),e}}class xs extends O{constructor(){super(...arguments);v(this,"priority",70);v(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,a,n){switch(a){case"H":return $(W.hour23h,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return L(a.length,e)}}validate(e,a){return a>=0&&a<=23}set(e,a,n){return e.setHours(n,0,0,0),e}}class Ts extends O{constructor(){super(...arguments);v(this,"priority",70);v(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,a,n){switch(a){case"K":return $(W.hour11h,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return L(a.length,e)}}validate(e,a){return a>=0&&a<=11}set(e,a,n){return e.getHours()>=12&&n<12?e.setHours(n+12,0,0,0):e.setHours(n,0,0,0),e}}class Ms extends O{constructor(){super(...arguments);v(this,"priority",70);v(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,a,n){switch(a){case"k":return $(W.hour24h,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return L(a.length,e)}}validate(e,a){return a>=1&&a<=24}set(e,a,n){const i=n<=24?n%24:n;return e.setHours(i,0,0,0),e}}class Cs extends O{constructor(){super(...arguments);v(this,"priority",60);v(this,"incompatibleTokens",["t","T"])}parse(e,a,n){switch(a){case"m":return $(W.minute,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return L(a.length,e)}}validate(e,a){return a>=0&&a<=59}set(e,a,n){return e.setMinutes(n,0,0),e}}class Ps extends O{constructor(){super(...arguments);v(this,"priority",50);v(this,"incompatibleTokens",["t","T"])}parse(e,a,n){switch(a){case"s":return $(W.second,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return L(a.length,e)}}validate(e,a){return a>=0&&a<=59}set(e,a,n){return e.setSeconds(n,0),e}}class Os extends O{constructor(){super(...arguments);v(this,"priority",30);v(this,"incompatibleTokens",["t","T"])}parse(e,a){const n=i=>Math.trunc(i*Math.pow(10,-a.length+3));return H(L(a.length,e),n)}set(e,a,n){return e.setMilliseconds(n),e}}class Fs extends O{constructor(){super(...arguments);v(this,"priority",10);v(this,"incompatibleTokens",["t","T","x"])}parse(e,a){switch(a){case"X":return ue(le.basicOptionalMinutes,e);case"XX":return ue(le.basic,e);case"XXXX":return ue(le.basicOptionalSeconds,e);case"XXXXX":return ue(le.extendedOptionalSeconds,e);case"XXX":default:return ue(le.extended,e)}}set(e,a,n){return a.timestampIsSet?e:E(e,e.getTime()-Xe(e)-n)}}class Ys extends O{constructor(){super(...arguments);v(this,"priority",10);v(this,"incompatibleTokens",["t","T","X"])}parse(e,a){switch(a){case"x":return ue(le.basicOptionalMinutes,e);case"xx":return ue(le.basic,e);case"xxxx":return ue(le.basicOptionalSeconds,e);case"xxxxx":return ue(le.extendedOptionalSeconds,e);case"xxx":default:return ue(le.extended,e)}}set(e,a,n){return a.timestampIsSet?e:E(e,e.getTime()-Xe(e)-n)}}class $s extends O{constructor(){super(...arguments);v(this,"priority",40);v(this,"incompatibleTokens","*")}parse(e){return Kt(e)}set(e,a,n){return[E(e,n*1e3),{timestampIsSet:!0}]}}class Ns extends O{constructor(){super(...arguments);v(this,"priority",20);v(this,"incompatibleTokens","*")}parse(e){return Kt(e)}set(e,a,n){return[E(e,n),{timestampIsSet:!0}]}}const Es={G:new Kn,y:new Jn,Y:new es,R:new ts,u:new as,Q:new rs,q:new ns,M:new ss,L:new os,w:new cs,I:new us,d:new hs,D:new ms,E:new vs,e:new gs,c:new ys,i:new bs,a:new ps,b:new _s,B:new ks,h:new Ds,H:new xs,K:new Ts,k:new Ms,m:new Cs,s:new Ps,S:new Os,X:new Fs,x:new Ys,t:new $s,T:new Ns},Ls=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,As=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ws=/^'([^]*?)'?$/,Hs=/''/g,qs=/\S/,Rs=/[a-zA-Z]/;function Is(r,t,e,a){var ne,se,I,A,J,ae,he,Me;const n=()=>E((a==null?void 0:a.in)||e,NaN),i=Gn(),c=(a==null?void 0:a.locale)??i.locale??Gt,d=(a==null?void 0:a.firstWeekContainsDate)??((se=(ne=a==null?void 0:a.locale)==null?void 0:ne.options)==null?void 0:se.firstWeekContainsDate)??i.firstWeekContainsDate??((A=(I=i.locale)==null?void 0:I.options)==null?void 0:A.firstWeekContainsDate)??1,g=(a==null?void 0:a.weekStartsOn)??((ae=(J=a==null?void 0:a.locale)==null?void 0:J.options)==null?void 0:ae.weekStartsOn)??i.weekStartsOn??((Me=(he=i.locale)==null?void 0:he.options)==null?void 0:Me.weekStartsOn)??0;if(!t)return r?n():_(e,a==null?void 0:a.in);const b={firstWeekContainsDate:d,weekStartsOn:g,locale:c},M=[new Zn(a==null?void 0:a.in,e)],q=t.match(As).map(x=>{const D=x[0];if(D in ot){const B=ot[D];return B(x,c.formatLong)}return x}).join("").match(Ls),R=[];for(let x of q){!(a!=null&&a.useAdditionalWeekYearTokens)&&Vt(x)&&it(x,t,r),!(a!=null&&a.useAdditionalDayOfYearTokens)&&jt(x)&&it(x,t,r);const D=x[0],B=Es[D];if(B){const{incompatibleTokens:me}=B;if(Array.isArray(me)){const oe=R.find(ye=>me.includes(ye.token)||ye.token===D);if(oe)throw new RangeError(`The format string mustn't contain \`${oe.fullToken}\` and \`${x}\` at the same time`)}else if(B.incompatibleTokens==="*"&&R.length>0)throw new RangeError(`The format string mustn't contain \`${x}\` and any other token at the same time`);R.push({token:D,fullToken:x});const U=B.run(r,x,c.match,b);if(!U)return n();M.push(U.setter),r=U.rest}else{if(D.match(Rs))throw new RangeError("Format string contains an unescaped latin alphabet character `"+D+"`");if(x==="''"?x="'":D==="'"&&(x=Bs(x)),r.indexOf(x)===0)r=r.slice(x.length);else return n()}}if(r.length>0&&qs.test(r))return n();const z=M.map(x=>x.priority).sort((x,D)=>D-x).filter((x,D,B)=>B.indexOf(x)===D).map(x=>M.filter(D=>D.priority===x).sort((D,B)=>B.subPriority-D.subPriority)).map(x=>x[0]);let X=_(e,a==null?void 0:a.in);if(isNaN(+X))return n();const fe={};for(const x of z){if(!x.validate(X,b))return n();const D=x.set(X,fe,b);Array.isArray(D)?(X=D[0],Object.assign(fe,D[1])):X=D}return X}function Bs(r){return r.match(Ws)[1].replace(Hs,"'")}function Ss(r,t){const e=_(r,t==null?void 0:t.in);return e.setMinutes(0,0,0),e}function Qs(r,t){const e=_(r,t==null?void 0:t.in);return e.setSeconds(0,0),e}function Gs(r,t){const e=_(r,t==null?void 0:t.in);return e.setMilliseconds(0),e}function zs(r,t){const e=()=>E(t==null?void 0:t.in,NaN),a=(t==null?void 0:t.additionalDigits)??2,n=Vs(r);let i;if(n.date){const b=Zs(n.date,a);i=Ks(b.restDateString,b.year)}if(!i||isNaN(+i))return e();const c=+i;let d=0,g;if(n.time&&(d=Js(n.time),isNaN(d)))return e();if(n.timezone){if(g=eo(n.timezone),isNaN(g))return e()}else{const b=new Date(c+d),M=_(0,t==null?void 0:t.in);return M.setFullYear(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()),M.setHours(b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds()),M}return _(c+d+g,t==null?void 0:t.in)}const ze={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Xs=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Us=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,js=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Vs(r){const t={},e=r.split(ze.dateTimeDelimiter);let a;if(e.length>2)return t;if(/:/.test(e[0])?a=e[0]:(t.date=e[0],a=e[1],ze.timeZoneDelimiter.test(t.date)&&(t.date=r.split(ze.timeZoneDelimiter)[0],a=r.substr(t.date.length,r.length))),a){const n=ze.timezone.exec(a);n?(t.time=a.replace(n[1],""),t.timezone=n[1]):t.time=a}return t}function Zs(r,t){const e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=r.match(e);if(!a)return{year:NaN,restDateString:""};const n=a[1]?parseInt(a[1]):null,i=a[2]?parseInt(a[2]):null;return{year:i===null?n:i*100,restDateString:r.slice((a[1]||a[2]).length)}}function Ks(r,t){if(t===null)return new Date(NaN);const e=r.match(Xs);if(!e)return new Date(NaN);const a=!!e[4],n=Ye(e[1]),i=Ye(e[2])-1,c=Ye(e[3]),d=Ye(e[4]),g=Ye(e[5])-1;if(a)return so(t,d,g)?to(t,d,g):new Date(NaN);{const b=new Date(0);return!ro(t,i,c)||!no(t,n)?new Date(NaN):(b.setUTCFullYear(t,i,Math.max(n,c)),b)}}function Ye(r){return r?parseInt(r):1}function Js(r){const t=r.match(Us);if(!t)return NaN;const e=rt(t[1]),a=rt(t[2]),n=rt(t[3]);return oo(e,a,n)?e*Ae+a*Le+n*1e3:NaN}function rt(r){return r&&parseFloat(r.replace(",","."))||0}function eo(r){if(r==="Z")return 0;const t=r.match(js);if(!t)return 0;const e=t[1]==="+"?-1:1,a=parseInt(t[2]),n=t[3]&&parseInt(t[3])||0;return io(a,n)?e*(a*Ae+n*Le):NaN}function to(r,t,e){const a=new Date(0);a.setUTCFullYear(r,0,4);const n=a.getUTCDay()||7,i=(t-1)*7+e+1-n;return a.setUTCDate(a.getUTCDate()+i),a}const ao=[31,null,31,30,31,30,31,31,30,31,30,31];function ta(r){return r%400===0||r%4===0&&r%100!==0}function ro(r,t,e){return t>=0&&t<=11&&e>=1&&e<=(ao[t]||(ta(r)?29:28))}function no(r,t){return t>=1&&t<=(ta(r)?366:365)}function so(r,t,e){return t>=1&&t<=53&&e>=0&&e<=6}function oo(r,t,e){return r===24?t===0&&e===0:e>=0&&e<60&&t>=0&&t<60&&r>=0&&r<25}function io(r,t){return t>=0&&t<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const co={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};$a._date.override({_id:"date-fns",formats:function(){return co},parse:function(r,t){if(r===null||typeof r>"u")return null;const e=typeof r;return e==="number"||r instanceof Date?r=_(r):e==="string"&&(typeof t=="string"?r=Is(r,t,new Date,this.options):r=zs(r,this.options)),qt(r)?r.getTime():null},format:function(r,t){return Sn(r,t,this.options)},add:function(r,t,e){switch(e){case"millisecond":return lt(r,t);case"second":return Yr(r,t);case"minute":return Or(r,t);case"hour":return Mr(r,t);case"day":return je(r,t);case"week":return $r(r,t);case"month":return ct(r,t);case"quarter":return Fr(r,t);case"year":return Nr(r,t);default:return r}},diff:function(r,t,e){switch(e){case"millisecond":return ut(r,t);case"second":return Ir(r,t);case"minute":return Hr(r,t);case"hour":return Wr(r,t);case"day":return Rt(r,t);case"week":return Br(r,t);case"month":return St(r,t);case"quarter":return Rr(r,t);case"year":return Sr(r,t);default:return 0}},startOf:function(r,t,e){switch(t){case"second":return Gs(r);case"minute":return Qs(r);case"hour":return Ss(r);case"day":return st(r);case"week":return de(r);case"isoWeek":return de(r,{weekStartsOn:+e});case"month":return Gr(r);case"quarter":return Qr(r);case"year":return Qt(r);default:return r}},endOf:function(r,t){switch(t){case"second":return Zr(r);case"minute":return jr(r);case"hour":return Xr(r);case"day":return It(r);case"week":return Ur(r);case"month":return Bt(r);case"quarter":return Vr(r);case"year":return zr(r);default:return r}}});const lo={class:"elite-dashboard"},uo={key:0,class:"loading-state"},fo={key:1,class:"error-state"},ho={class:"error-message"},mo={key:2,class:"empty-state"},vo={key:3},go={class:"home-sections-grid"},yo={class:"category-title"},wo={class:"stats-grid"},bo=["title"],po={class:"stat-icon"},_o={class:"stat-content"},ko={class:"stat-value"},Do={class:"stat-label"},xo={key:1,class:"section"},To={class:"charts-grid"},Mo={class:"chart-card wide"},Co={class:"driver-selection-controls"},Po={class:"driver-chips"},Oo=["onClick"],Fo={class:"chart-card"},Yo={class:"gauge-container"},$o={class:"gauge-score"},No={class:"chart-card trophy-case-card"},Eo={class:"trophies-grid-compact"},Lo={class:"trophy-count-compact"},Ao={class:"trophy-count-compact"},Wo={class:"trophy-count-compact"},Ho={class:"trophy-count-compact"},qo={class:"trophy-count-compact"},Ro={class:"modal-header"},Io={class:"modal-body"},Bo={key:0,class:"loading-spinner"},So={key:1,class:"empty-message"},Qo={key:2,class:"trophy-details-list"},Go={class:"detail-info"},zo={class:"record-header"},Xo={class:"record-track"},Uo={class:"record-track-name"},jo={class:"record-time-main"},Vo={class:"record-value"},Zo={class:"record-date"},Ko={class:"record-leaderboard"},Jo={class:"leaderboard-list"},ei={class:"leaderboard-position"},ti={class:"position-number"},ai={key:0,class:"position-medal"},ri={key:1,class:"position-medal"},ni={key:2,class:"position-medal"},si={class:"leaderboard-driver"},oi={class:"leaderboard-time"},ii={key:0,class:"leaderboard-gap"},ci={class:"position-track"},li={class:"position-badge"},ui={key:0},di={key:1},fi={key:2},hi={key:3},mi={class:"position-track-name"},vi={class:"position-time-main"},gi={class:"position-value"},yi={class:"position-date"},wi={key:0,class:"position-gaps"},bi={key:0,class:"gap-stat winning"},pi={class:"gap-content"},_i={class:"gap-value"},ki={key:0,class:"gap-driver"},Di={key:0,class:"gap-stat losing"},xi={class:"gap-content"},Ti={class:"gap-value"},Mi={class:"gap-driver"},Ci={key:1,class:"gap-stat winning"},Pi={class:"gap-content"},Oi={class:"gap-value"},Fi={class:"gap-driver"},Yi={key:1,class:"session-leaderboard"},$i={class:"leaderboard-list"},Ni={class:"leaderboard-position"},Ei={class:"position-number"},Li={key:0,class:"position-medal"},Ai={key:1,class:"position-medal"},Wi={key:2,class:"position-medal"},Hi={class:"leaderboard-driver"},qi={class:"leaderboard-time"},Ri={key:0,class:"leaderboard-gap"},Ii={class:"section"},Bi={class:"charts-grid"},Si={key:0,class:"chart-card ultra-wide"},Qi={class:"heatmap-container-pro"},Gi={class:"heatmap-wrapper"},zi={class:"heatmap-scroll-container"},Xi={class:"heatmap-table"},Ui={class:"track-header-content"},ji={class:"track-name"},Vi={class:"track-laps"},Zi={class:"hm-driver-row"},Ki=["onMouseenter","onClick"],Ji={key:0,class:"cell-content"},ec={key:0,class:"fas fa-trophy hm-trophy"},tc={class:"hm-time"},ac={class:"hm-laps"},rc={class:"hm-gap"},nc={key:1,class:"no-data"},sc={class:"heatmap-stats-panel"},oc={key:0,class:"stats-panel-content"},ic={class:"stat-row stat-driver"},cc={class:"stat-value"},lc={class:"stat-row stat-track"},uc={class:"stat-value"},dc={class:"stat-row stat-highlight"},fc={class:"stat-value"},hc={class:"stat-row"},mc={class:"stat-value"},vc={class:"stat-row"},gc={class:"stat-value"},yc={class:"stat-row"},wc={class:"stat-value"},bc={class:"stat-row stat-highlight"},pc={class:"stat-value"},_c={class:"stat-row"},kc={class:"stat-value"},Dc={class:"stat-row"},xc={class:"stat-value"},Tc={key:1,class:"stats-panel-content"},Mc={class:"heatmap-legend"},Cc={class:"legend-items"},Pc={class:"legend-item"},Oc={class:"legend-item"},Fc={class:"legend-item"},Yc={class:"legend-item"},$c={class:"legend-item"},Nc={class:"section"},Ec={class:"chart-card map-card"},Lc={class:"map-container"},Ac={class:"modal-header"},Wc={class:"modal-body"},Hc={class:"search-box"},qc={key:0,class:"loading-state"},Rc={key:1,class:"empty-state"},Ic={key:2,class:"drivers-grid"},Bc=["onClick","aria-label"],Sc={class:"driver-avatar"},Qc={class:"driver-name"},Gc=Ee({__name:"HomeView",setup(r){tt.register(...Na);const t=Ta(),e=Lt(),a=xt(()=>{var f;return(f=t.user)==null?void 0:f.driver_id}),n=C(null),{getOverviewStats:i,getDriverStats:c,getTrackStats:d,getDriverActivityOverTime:g,getDriverTrackHeatmap:b,getTrophyCase:M}=Mt(),q=C(!0),R=C(null),z=C([]),X=C([]),fe=C([]),ne=C(!1),se=C(null),I=C(!1),A=C(!1),J=C(!1),ae=C(""),he=C([]),Me=xt(()=>{const f=ae.value.toLowerCase().trim(),o=new Set(he.value);return fe.value.filter(l=>o.has(l.id)?!1:f?l.name.toLowerCase().includes(f):!0).sort((l,y)=>l.name.localeCompare(y.name))}),x=C([]),D=C({emblems:0,gold:0,silver:0,bronze:0,coal:0}),B=C([]),me=C([]),U=C([]),oe=C(0),ye=C(0),Ce=C([]),re=C([]),G=C(null),aa=f=>{const o=re.value.indexOf(f);o>-1?re.value.splice(o,1):re.value.push(f),Ze()},ra=()=>{re.value=[...Ce.value],Ze()},na=()=>{var o;const f=((o=t.user)==null?void 0:o.name)||"";f&&Ce.value.includes(f)&&(re.value=[f],Ze())};let Ve=[];const Ze=()=>{Ve.length>0&&bt(Ve)},Ke=C(!1),He=C(""),mt=C(""),ke=C([]),qe=C(!1),Pe=async f=>{if(f==="emblems"&&D.value.emblems===0||f==="gold"&&D.value.gold===0||f==="silver"&&D.value.silver===0||f==="bronze"&&D.value.bronze===0||f==="coal"&&D.value.coal===0)return;He.value=f,Ke.value=!0,qe.value=!0;const o={emblems:"ðŸ… Track Records",gold:"ðŸ¥‡ Gold Trophies",silver:"ðŸ¥ˆ Silver Trophies",bronze:"ðŸ¥‰ Bronze Trophies",coal:"ðŸª¨ Coal Awards"};mt.value=o[f]||"Trophies";try{const{fetchTrophyDetails:l}=Mt(),y=n.value||a.value;if(!y){console.error("No driver ID available for trophy details"),ke.value=[],qe.value=!1;return}const w=await l(y,f);ke.value=w||[]}catch(l){console.error("Failed to fetch trophy details:",l),ke.value=[]}finally{qe.value=!1}},vt=()=>{Ke.value=!1,ke.value=[]},gt=f=>new Date(f).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),ee=f=>{if(f==null)return"N/A";const o=Math.floor(f/60),l=(f%60).toFixed(2);return o>0?`${o}:${l.padStart(5,"0")}`:`${l}s`},Re=f=>f.toLocaleString("en-US"),sa=(f,o)=>{if(!f||!o||f===0)return 0;const l=Math.abs(f-o)/f;return Math.max(0,Math.min(100,100-l*200))},yt=async()=>{var f,o,l,y,w;try{q.value=!0,R.value=null;let p=a.value;if(!p||p===void 0){if(console.warn("âš ï¸ No driver_id in user object, attempting to find driver by name..."),(f=t.user)!=null&&f.name)try{const Z=await c();if(Z){const te=Z.find(P=>{var ce;return P.driver_name.toLowerCase()===((ce=t.user)==null?void 0:ce.name.toLowerCase())});if(te)p=te.driver_id,n.value=p;else{console.error("âŒ No driver found matching user name:",t.user.name),R.value=`No driver profile found for "${t.user.name}". Please contact an administrator.`,q.value=!1;return}}}catch(Z){console.error("âŒ Error finding driver by name:",Z)}if(!p){console.error("Driver ID not found. Auth user:",t.user),R.value="Driver ID not found. Please contact an administrator to link your account to a driver profile.",q.value=!1;return}}n.value=p;const[k,ve,T,N,Y,j]=await Promise.all([i(p),c(),d(),g(),b(),M(p)]);if(!k){R.value="Failed to load data. Please try logging out and logging back in.";return}if(j&&(D.value=j),k.average_lap_time&&k.median_lap_time&&(ye.value=sa(k.average_lap_time,k.median_lap_time),ye.value=0),x.value=[{title:"Performance",stats:[{icon:"â—†",label:"Best Lap",value:k.best_lap?ee(k.best_lap.lap_time):"N/A",tooltip:"Your fastest lap time across all sessions and tracks",color:"#1A1F26"},{icon:"â—·",label:"Avg Lap Time",value:ee(k.average_lap_time),tooltip:"Average lap time = Sum of all lap times Ã· Total laps",color:"#1A1F26"},{icon:"âš¡",label:"Avg Speed",value:k.average_speed_kmh&&typeof k.average_speed_kmh=="number"?`${k.average_speed_kmh.toFixed(0)} km/h`:"N/A",tooltip:"Average speed = (Track distance Ã· Lap time) Ã— 3.6",color:"#1A1F26"},{icon:"â—Œ",label:"Total Corners",value:Re(k.total_corners||0),tooltip:"Total corners = Sum of all track corners Ã— Total laps",color:"#1A1F26"}]},{title:"Sessions & Activity",stats:[{icon:"â–¸",label:"Total Laps",value:Re(k.total_laps||0),tooltip:"Total number of laps completed across all sessions",color:"#1A1F26"},{icon:"â—Ž",label:"Sessions",value:Re(k.total_sessions||0),tooltip:"Total karting sessions attended",color:"#1A1F26"},{icon:"âŸ³",label:"Laps/Session",value:k.total_sessions>0?(k.total_laps/k.total_sessions).toFixed(1):"0.0",tooltip:"Laps per session = Total laps Ã· Total sessions",color:"#1A1F26"},{icon:"â—ˆ",label:"Distance",value:`${k.total_distance_km||0} km`,tooltip:"Total distance = Sum of all track lengths Ã— Laps driven",color:"#1A1F26"},{icon:"â–¸",label:"Tracks",value:Re(k.unique_tracks||0),tooltip:"Number of unique tracks you have driven on",color:"#1A1F26"}]},{title:"Financial",stats:[{icon:"â‚¬",label:"Total Cost",value:`â‚¬${((o=k.total_cost)==null?void 0:o.toFixed(2))||"0.00"}`,tooltip:"Total cost = Sum of all session costs",color:"#1A1F26"},{icon:"â‚¬",label:"Per Lap",value:`â‚¬${((l=k.cost_per_lap)==null?void 0:l.toFixed(2))||"0.00"}`,tooltip:"Cost per lap = Total cost Ã· Total laps",color:"#1A1F26"},{icon:"â‚¬",label:"Per Km",value:`â‚¬${((y=k.cost_per_km)==null?void 0:y.toFixed(2))||"0.00"}`,tooltip:"Cost per km = Total cost Ã· Total distance (km)",color:"#1A1F26"},{icon:"â‚¬",label:"Per Session",value:`â‚¬${((w=k.cost_per_session)==null?void 0:w.toFixed(2))||"0.00"}`,tooltip:"Cost per session = Total cost Ã· Total sessions",color:"#1A1F26"}]},{title:"Environmental",stats:[{icon:"â—",label:"COâ‚‚ Emissions",value:`${k.co2_emissions_kg||0} kg`,tooltip:"COâ‚‚ emissions = Total distance (km) Ã— 0.2 kg/km",color:"#1A1F26"},{icon:"ðŸŒ²",label:"Trees to Offset",value:`${((k.co2_emissions_kg||0)/21.77).toFixed(2)}`,tooltip:"Trees needed = COâ‚‚ emissions (kg) Ã· 21.77 kg/tree/year",color:"#1A1F26"}]}],Y&&(Y.value=Y,Y.tracks&&Y.drivers&&Y.heatmap_data)){B.value=Y.drivers.map(te=>te.name),me.value=Y.tracks.map(te=>te.name);let Z=0;U.value=Y.heatmap_data.map(te=>te.map(P=>{if(!P.has_data)return{time:"N/A",gap:"N/A",gapPercentage:0,performance:0,has_data:!1,isRecord:!1,lapCount:0,gapSeconds:0};const ce=P.gap===0||Math.abs(P.gap)<.01,we=Math.abs(P.gap);return we>Z&&(Z=we),{time:ee(P.best_lap_time),gap:ce?P.best_lap_time:P.gap>=0?`+${P.gap.toFixed(2)}s`:`${P.gap.toFixed(2)}s`,gapPercentage:P.gap_percentage,performance:100-P.gap_percentage,has_data:!0,isRecord:ce,lapCount:P.lap_count,gapSeconds:we,avgLap:P.avg_lap_time?ee(P.avg_lap_time):"N/A",worstLap:P.worst_lap_time?ee(P.worst_lap_time):"N/A",trackRecord:P.track_record?ee(P.track_record):"N/A",consistency:P.consistency_range?`${P.consistency_range.toFixed(2)}s`:"N/A"}})),oe.value=Z}N&&N.length>0&&(await Tt(),setTimeout(()=>{bt(N),fa(ye.value)},100))}catch(p){console.error("Error loading real data:",p),R.value="Failed to load dashboard data. Please check your connection."}finally{q.value=!1}},oa=(f,o)=>{var w;const l=(w=U.value[f])==null?void 0:w[o];if(!l||!l.has_data)return"no-data";const y=l.performance||0;return y>=95?"perf-excellent":y>=90?"perf-good":y>=85?"perf-average":"perf-poor"},ia=(f,o)=>{var ve;const l=(ve=U.value[f])==null?void 0:ve[o];if(!l||!l.has_data)return{};const y=oe.value;if(y===0)return{};const w=l.gapSeconds/y*100;let p,k;return w<=1?(p="#10B981",k="#059669"):w<=2.5?(p="#84CC16",k="#65A30D"):w<=5?(p="#FBBF24",k="#F59E0B"):w<=10?(p="#FB923C",k="#F97316"):w<=25?(p="#F87171",k="#EF4444"):w<=50?(p="#EF4444",k="#DC2626"):w<=80?(p="#DC2626",k="#B91C1C"):(p="#B91C1C",k="#991B1B"),{background:`linear-gradient(135deg, ${p}, ${k})`,boxShadow:`0 2px 6px ${p}40`}},wt=(f,o)=>{var w;const l=(w=U.value[f])==null?void 0:w[o];if(!l||!l.has_data){G.value=null;return}const y=l;G.value={driver:B.value[f],track:me.value[o],time:y.time,avgLap:y.avgLap,worstLap:y.worstLap,trackRecord:y.trackRecord,gapToRecord:y.gap,consistency:y.consistency,lapCount:y.lapCount}},ca=()=>{G.value=null},la=(f,o)=>{var y,w,p;const l=(y=U.value[f])==null?void 0:y[o];l!=null&&l.has_data&&(((w=G.value)==null?void 0:w.driver)===B.value[f]&&((p=G.value)==null?void 0:p.track)===me.value[o]?G.value=null:wt(f,o))},ua=f=>!f||f==="N/A"||f==="â€”"?"â€”":f,da=f=>{let o=0;return B.value.forEach((l,y)=>{var p;const w=(p=U.value[y])==null?void 0:p[f];w!=null&&w.has_data&&w.lapCount&&(o+=w.lapCount)}),o},Ie=C(null),Je=C(null);let ie={};const bt=f=>{if(!Ie.value){console.warn("âš ï¸ Activity canvas not available");return}Ve=f,ie.activity&&(ie.activity.destroy(),ie.activity=null),Tt(()=>{if(!Ie.value){console.warn("âš ï¸ Activity canvas lost after nextTick");return}const o={};f.forEach(T=>{o[T.driver_name]||(o[T.driver_name]={});const N=o[T.driver_name];if(!N){console.error("Data processing error: dateMap not found for driver",T.driver_name);return}const Y=T.session_date;if(!N[Y])N[Y]={cumulative:T.cumulative_laps,added:T.laps_added||0};else{const j=N[Y];T.cumulative_laps>j.cumulative&&(j.cumulative=T.cumulative_laps),j.added+=T.laps_added||0}});const l=Object.keys(o),y=[...Ce.value];Ce.value=l,y.length===0&&re.value.length===0&&(re.value=[...l]);const w=new Set;Object.values(o).forEach(T=>{Object.keys(T).forEach(N=>w.add(N))});const p=[...w].sort(),k=Object.entries(o).filter(([T])=>re.value.includes(T)).map(([T,N],Y)=>{let j=0;const Z=p.map((P,ce)=>{const we=N[P];return we?(j=we.cumulative,{x:ce,y:j,added:we.added}):{x:ce,y:j,added:0}});Z.filter(P=>P!==null).length<13&&Z.map((P,ce)=>P!==null?`[${ce}:${P==null?void 0:P.y}]`:"null").join(" ");const te=l.indexOf(T);return{label:T,data:Z,borderColor:`hsl(${te*60}, 70%, 60%)`,backgroundColor:`hsla(${te*60}, 70%, 60%, 0.1)`,borderWidth:3,tension:.4,fill:!1,hidden:!1,pointRadius:6,pointHoverRadius:9,pointBackgroundColor:`hsl(${te*60}, 70%, 60%)`,pointBorderColor:"#0D1117",pointBorderWidth:2,spanGaps:!0}});k.forEach((T,N)=>{T.data.filter(Y=>Y!==null).length});const ve=p.map(T=>{const N=new Date(T),Y=N.toLocaleDateString("en-US",{weekday:"short"}),j=N.getDate();return`${Y} ${j}`});ie.activity=new tt(Ie.value,{type:"line",data:{datasets:k},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,labels:{color:"#F0F6FC",font:{size:12},padding:15,usePointStyle:!0}},tooltip:{enabled:!0,backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#F9FAFB",bodyColor:"#E5E7EB",borderColor:"rgba(59, 130, 246, 0.5)",borderWidth:2,padding:16,displayColors:!0,usePointStyle:!0,boxWidth:8,boxHeight:8,bodySpacing:6,titleSpacing:8,titleFont:{size:13,weight:"bold",family:"'Inter', sans-serif"},bodyFont:{size:12,weight:"normal",family:"'Inter', sans-serif"},cornerRadius:8,caretSize:6,caretPadding:10,callbacks:{title:T=>{const N=T[0].parsed.x,Y=p[N];return Y?new Date(Y).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"Unknown Date"},label:T=>{const N=T.dataset.label,Y=T.dataset.data[T.dataIndex];if(!Y)return"";const j=Y.y,Z=Y.added||0;return`${N}: ${j} (+${Z})`},labelTextColor:function(T){return T.dataset.borderColor}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Cumulative Laps",color:"#F0F6FC",font:{size:13,weight:"bold"}},ticks:{color:"#8B949E",font:{size:11}},grid:{color:"#30363D"}},x:{type:"linear",min:0,max:p.length-1,ticks:{stepSize:1,color:"#8B949E",font:{size:11},callback:function(T){return ve[T]||""}},title:{display:!0,text:"Session Date",color:"#F0F6FC",font:{size:13,weight:"bold"}},grid:{color:"#30363D"}}}}}),ie.activity.data.datasets.forEach((T,N)=>{}),ie.activity.update("none"),setTimeout(()=>{},100)})},fa=f=>{if(!Je.value)return;ie.consistency&&ie.consistency.destroy();let o="#B91C1C";f>=95?o="#10B981":f>=85?o="#84CC16":f>=70?o="#FBBF24":f>=50&&(o="#FB923C"),ie.consistency=new tt(Je.value,{type:"doughnut",data:{datasets:[{data:[f,100-f],backgroundColor:[o,"#30363D"],borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,rotation:-90,circumference:180,cutout:"75%",plugins:{legend:{display:!1},tooltip:{enabled:!1}}}})},ha=async()=>{await yt()},ma=async()=>{localStorage.removeItem("api_token"),window.location.href="/karting/login"},Be=async()=>{var f,o;ne.value=!0,se.value=null;try{z.value=await De.friends.getAll()}catch(l){const y=((o=(f=l.response)==null?void 0:f.data)==null?void 0:o.message)||l.message||"Failed to load friends";se.value=y,console.error("Failed to load friends:",l)}finally{ne.value=!1}},va=async()=>{await Be()},et=async()=>{I.value=!0;try{X.value=await De.activity.latest(!0,10)}catch(f){console.error("Failed to load activity:",f)}finally{I.value=!1}},ga=async()=>{A.value=!0;try{const f=await De.drivers.getAll();fe.value=f}catch{e.error("Failed to load drivers. Please try again.")}finally{A.value=!1}},ya=async()=>{try{he.value=await De.friends.getDriverIds()}catch{!ne.value&&!se.value&&z.value.length>0?he.value=z.value.map(o=>o.driver_id):he.value=[],a.value&&!he.value.includes(a.value)&&he.value.push(a.value)}},wa=async()=>{ae.value="";const f=[];fe.value.length===0&&f.push(ga()),f.push(ya()),await Promise.all(f),J.value=!0},ba=async f=>{var o,l,y;try{const w=await De.friends.add(f);await Promise.all([Be(),et()]),J.value=!1;const p=(o=w.friend)==null?void 0:o.name;p?e.success(`${p} added to your racing crew!`):e.success("New friend added to your racing crew!")}catch(w){const p=((y=(l=w.response)==null?void 0:l.data)==null?void 0:y.message)||"Failed to add friend";e.error(p)}},pa=async f=>{var o,l;if(confirm("Remove this friend from your list?"))try{const y=await De.friends.remove(f);await Promise.all([Be(),et()]),y.success&&e.success("Friend removed from your racing crew")}catch(y){const w=((l=(o=y.response)==null?void 0:o.data)==null?void 0:l.message)||"Failed to remove friend";e.error(w)}};return Ma(async()=>{t.user||await t.fetchCurrentUser(),await Promise.all([Be(),et()]),await yt()}),Ca(()=>{Object.values(ie).forEach(f=>f.destroy())}),(f,o)=>(u(),h("div",lo,[$e(Dr),q.value?(u(),h("div",uo,[...o[14]||(o[14]=[s("div",{class:"spinner"},null,-1),s("p",null,"Loading real data from database...",-1)])])):R.value?(u(),h("div",fo,[o[15]||(o[15]=s("h2",null,"âš ï¸ Error Loading Data",-1)),s("p",ho,m(R.value),1),s("div",{class:"error-actions"},[s("button",{onClick:ha,class:"retry-btn"},"ðŸ”„ Retry"),s("button",{onClick:ma,class:"logout-btn"},"ðŸšª Logout & Re-login")]),o[16]||(o[16]=s("p",{class:"hint"},'If you see "401 Unauthorized", your session may have expired. Try logging out and back in.',-1))])):x.value.length===0?(u(),h("div",mo,[...o[17]||(o[17]=[s("h2",null,"ðŸ“­ No Data Available",-1),s("p",null,"Your database is empty. Upload some session data to see analytics!",-1),s("p",{class:"hint"},"Navigate to Admin â†’ Upload Data to import your karting sessions.",-1)])])):(u(),h("div",vo,[s("div",go,[$e(ja,{friends:z.value,loading:ne.value,error:se.value,onAddFriend:wa,onRemoveFriend:pa,onRetry:va},null,8,["friends","loading","error"]),$e(cr,{activities:X.value,loading:I.value,"user-driver-id":a.value},null,8,["activities","loading","user-driver-id"])]),x.value.length>0?(u(),nt(gr,{key:0,stats:x.value.flatMap(l=>l.stats)},null,8,["stats"])):Q("",!0),(u(!0),h(S,null,V(x.value,l=>(u(),h("div",{key:l.title,class:"stat-category"},[s("h2",yo,m(l.title),1),s("div",wo,[(u(!0),h(S,null,V(l.stats,(y,w)=>(u(),h("div",{key:w,class:"stat-card",style:Se({background:y.color}),title:y.tooltip},[s("div",po,m(y.icon),1),s("div",_o,[s("div",ko,m(y.value),1),s("div",Do,m(y.label),1)])],12,bo))),128))])]))),128)),B.value.length>0?(u(),h("div",xo,[o[33]||(o[33]=s("h2",{class:"section-title"},[s("span",null,"ðŸŽï¸"),Qe(" Driver Performance Overview ")],-1)),s("div",To,[s("div",Mo,[o[19]||(o[19]=s("h3",{class:"chart-title"},"ðŸ“ˆ Driver Activity Over Time",-1)),o[20]||(o[20]=s("p",{class:"chart-info"},"Track your lap accumulation across all sessions.",-1)),s("div",Co,[o[18]||(o[18]=s("div",{class:"control-label"},"Show Drivers:",-1)),s("div",Po,[(u(!0),h(S,null,V(Ce.value,(l,y)=>(u(),h("button",{key:l,class:K(["driver-chip",{active:re.value.includes(l)}]),style:Se({borderColor:re.value.includes(l)?`hsl(${y*60}, 70%, 60%)`:"#444",backgroundColor:re.value.includes(l)?`hsla(${y*60}, 70%, 60%, 0.2)`:"transparent"}),onClick:w=>aa(l)},[s("span",{class:"chip-dot",style:Se({background:`hsl(${y*60}, 70%, 60%)`})},null,4),Qe(" "+m(l),1)],14,Oo))),128))]),s("div",{class:"control-actions"},[s("button",{onClick:ra,class:"control-btn"},"Show All Drivers"),s("button",{onClick:na,class:"control-btn"},"Only Me")])]),s("canvas",{ref_key:"activityCanvas",ref:Ie},null,512)]),s("div",Fo,[o[21]||(o[21]=Pa('<h3 class="chart-title" data-v-bcfa30f7>â—‰ Your Consistency</h3><div class="chart-info" data-v-bcfa30f7><strong data-v-bcfa30f7>How it&#39;s calculated:</strong> Consistency = 100 - (|avg - median| / avg Ã— 200)<br data-v-bcfa30f7><strong data-v-bcfa30f7>What it means:</strong> Higher score = more reliable lap times. Score of 100 = perfect consistency.<br data-v-bcfa30f7><strong data-v-bcfa30f7>How to improve:</strong><ul style="margin:0.5rem 0 0 1.5rem;font-size:0.75rem;" data-v-bcfa30f7><li data-v-bcfa30f7>Maintain smooth, consistent steering and throttle inputs</li><li data-v-bcfa30f7>Use the same racing line every lap</li><li data-v-bcfa30f7>Focus on mental clarity and avoid distractions</li><li data-v-bcfa30f7>Practice brake points until they&#39;re muscle memory</li></ul></div>',2)),s("div",Yo,[s("canvas",{ref_key:"consistencyCanvas",ref:Je},null,512),s("div",$o,m(ye.value.toFixed(1)),1)])]),s("div",No,[o[32]||(o[32]=s("h3",{class:"chart-title"},"ðŸ† Trophy Case",-1)),s("div",Eo,[s("div",{class:K(["trophy-card-compact emblem",{dimmed:D.value.emblems===0}]),title:"Track Records - You hold the fastest lap ever on these tracks",onClick:o[0]||(o[0]=l=>Pe("emblems"))},[o[22]||(o[22]=s("div",{class:"trophy-icon-compact"},"ðŸ…",-1)),s("div",Lo,m(D.value.emblems),1),o[23]||(o[23]=s("div",{class:"trophy-label-compact"},"Records",-1))],2),s("div",{class:K(["trophy-card-compact gold",{dimmed:D.value.gold===0}]),title:"Session Winner - You were fastest in these sessions",onClick:o[1]||(o[1]=l=>Pe("gold"))},[o[24]||(o[24]=s("div",{class:"trophy-icon-compact"},"ðŸ¥‡",-1)),s("div",Ao,m(D.value.gold),1),o[25]||(o[25]=s("div",{class:"trophy-label-compact"},"Gold",-1))],2),s("div",{class:K(["trophy-card-compact silver",{dimmed:D.value.silver===0}]),title:"Second Place - You finished 2nd in these sessions",onClick:o[2]||(o[2]=l=>Pe("silver"))},[o[26]||(o[26]=s("div",{class:"trophy-icon-compact"},"ðŸ¥ˆ",-1)),s("div",Wo,m(D.value.silver),1),o[27]||(o[27]=s("div",{class:"trophy-label-compact"},"Silver",-1))],2),s("div",{class:K(["trophy-card-compact bronze",{dimmed:D.value.bronze===0}]),title:"Third Place - You finished 3rd in these sessions",onClick:o[3]||(o[3]=l=>Pe("bronze"))},[o[28]||(o[28]=s("div",{class:"trophy-icon-compact"},"ðŸ¥‰",-1)),s("div",Ho,m(D.value.bronze),1),o[29]||(o[29]=s("div",{class:"trophy-label-compact"},"Bronze",-1))],2),s("div",{class:K(["trophy-card-compact coal",{dimmed:D.value.coal===0}]),title:"Last Place - Room for improvement in these sessions",onClick:o[4]||(o[4]=l=>Pe("coal"))},[o[30]||(o[30]=s("div",{class:"trophy-icon-compact"},"ðŸª¨",-1)),s("div",qo,m(D.value.coal),1),o[31]||(o[31]=s("div",{class:"trophy-label-compact"},"Coal",-1))],2)])])])])):Q("",!0),Ke.value?(u(),h("div",{key:2,class:"modal-overlay",onClick:vt},[s("div",{class:"modal-content trophy-modal",onClick:o[5]||(o[5]=kt(()=>{},["stop"]))},[s("div",Ro,[s("h2",null,m(mt.value),1),s("button",{class:"modal-close",onClick:vt},"Ã—")]),s("div",Io,[qe.value?(u(),h("div",Bo,"Loading...")):ke.value.length===0?(u(),h("div",So," No "+m(He.value)+" trophies yet. Keep racing! ",1)):(u(),h("div",Qo,[(u(!0),h(S,null,V(ke.value,(l,y)=>(u(),h("div",{key:y,class:K(["trophy-detail-item",{"track-record-item":He.value==="emblems"}])},[s("div",Go,[He.value==="emblems"?(u(),h(S,{key:0},[s("div",zo,[s("div",Xo,[o[34]||(o[34]=s("span",{class:"record-badge"},"TRACK RECORD",-1)),s("h3",Uo,m(l.track_name),1)]),s("div",jo,[o[35]||(o[35]=s("span",{class:"record-label"},"Your Record",-1)),s("span",Vo,m(ee(l.time)),1),s("span",Zo,m(gt(l.session_date)),1)])]),s("div",Ko,[o[36]||(o[36]=s("div",{class:"leaderboard-title"},"All-Time Best Laps",-1)),s("div",Jo,[(u(!0),h(S,null,V(l.all_drivers,(w,p)=>(u(),h("div",{key:p,class:K(["leaderboard-entry",{"is-record-holder":w.is_current_driver,"is-podium":w.position<=3}])},[s("div",ei,[s("span",ti,"#"+m(w.position),1),w.position===1?(u(),h("span",ai,"ðŸ¥‡")):w.position===2?(u(),h("span",ri,"ðŸ¥ˆ")):w.position===3?(u(),h("span",ni,"ðŸ¥‰")):Q("",!0)]),s("div",si,m(w.name),1),s("div",oi,m(ee(w.time)),1),w.position>1?(u(),h("div",ii," +"+m(ee(w.time-l.time)),1)):Q("",!0)],2))),128))])])],64)):(u(),h(S,{key:1},[s("div",{class:K(["position-header","position-"+l.position])},[s("div",ci,[s("span",li,[l.position===1?(u(),h("span",ui,"ðŸ¥‡ 1ST PLACE")):l.position===2?(u(),h("span",di,"ðŸ¥ˆ 2ND PLACE")):l.position===3?(u(),h("span",fi,"ðŸ¥‰ 3RD PLACE")):(u(),h("span",hi,"P"+m(l.position),1))]),s("h3",mi,m(l.track_name),1)]),s("div",vi,[o[37]||(o[37]=s("span",{class:"position-label"},"Your Time",-1)),s("span",gi,m(ee(l.time)),1),s("span",yi,m(gt(l.session_date)),1)])],2),l.position===1||l.gap_ahead||l.gap_behind?(u(),h("div",wi,[l.position===1&&l.gap_ahead?(u(),h("div",bi,[o[38]||(o[38]=s("span",{class:"gap-label"},"Winning Margin",-1)),s("div",pi,[s("span",_i,m(l.gap_ahead),1),l.driver_behind?(u(),h("span",ki,"ahead of "+m(l.driver_behind),1)):Q("",!0)])])):(u(),h(S,{key:1},[l.gap_ahead&&l.driver_ahead?(u(),h("div",Di,[o[39]||(o[39]=s("span",{class:"gap-label"},"Behind Leader",-1)),s("div",xi,[s("span",Ti,m(l.gap_ahead),1),s("span",Mi,"behind "+m(l.driver_ahead),1)])])):Q("",!0),l.gap_behind&&l.driver_behind?(u(),h("div",Ci,[o[40]||(o[40]=s("span",{class:"gap-label"},"Ahead of Next",-1)),s("div",Pi,[s("span",Oi,m(l.gap_behind),1),s("span",Fi,"ahead of "+m(l.driver_behind),1)])])):Q("",!0)],64))])):Q("",!0),l.all_drivers&&l.all_drivers.length>0?(u(),h("div",Yi,[o[41]||(o[41]=s("div",{class:"leaderboard-title"},"Session Results",-1)),s("div",$i,[(u(!0),h(S,null,V(l.all_drivers,(w,p)=>(u(),h("div",{key:p,class:K(["leaderboard-entry",{"is-current-driver":w.is_current_driver,"is-podium":w.position<=3}])},[s("div",Ni,[s("span",Ei,"P"+m(w.position),1),w.position===1?(u(),h("span",Li,"ðŸ¥‡")):w.position===2?(u(),h("span",Ai,"ðŸ¥ˆ")):w.position===3?(u(),h("span",Wi,"ðŸ¥‰")):Q("",!0)]),s("div",Hi,m(w.name),1),s("div",qi,m(ee(w.time)),1),w.position>1&&l.all_drivers[0]?(u(),h("div",Ri," +"+m(ee(w.time-l.all_drivers[0].time)),1)):Q("",!0)],2))),128))])])):Q("",!0)],64))])],2))),128))]))])])])):Q("",!0),s("div",Ii,[s("div",Bi,[B.value.length>0&&me.value.length>0?(u(),h("div",Si,[o[61]||(o[61]=s("div",{class:"chart-header"},[s("h3",null,[s("i",{class:"fas fa-fire"}),Qe(" Best Lap Time Heatmap")])],-1)),s("div",Qi,[s("div",Gi,[s("div",zi,[s("table",Xi,[s("thead",null,[s("tr",null,[o[43]||(o[43]=s("th",{class:"hm-corner"},"Driver / Track",-1)),(u(!0),h(S,null,V(me.value,(l,y)=>(u(),h("th",{key:`th-${y}`,class:"hm-track-col"},[s("div",Ui,[o[42]||(o[42]=s("i",{class:"fas fa-flag-checkered track-icon"},null,-1)),s("span",ji,m(l),1),s("span",Vi,m(da(y))+" laps",1)])]))),128))])]),s("tbody",null,[(u(!0),h(S,null,V(B.value,(l,y)=>(u(),h("tr",{key:`row-${y}`},[s("td",Zi,m(l),1),(u(!0),h(S,null,V(me.value,(w,p)=>{var k,ve;return u(),h("td",{key:`cell-${y}-${p}`,class:K(["hm-cell",oa(y,p)]),style:Se(ia(y,p)),onMouseenter:T=>wt(y,p),onMouseleave:o[6]||(o[6]=T=>ca()),onClick:T=>la(y,p)},[(ve=(k=U.value[y])==null?void 0:k[p])!=null&&ve.has_data?(u(),h("div",Ji,[U.value[y][p].isRecord?(u(),h("i",ec)):Q("",!0),s("div",tc,m(U.value[y][p].time),1),s("div",ac,m(U.value[y][p].lapCount)+" laps",1),s("div",rc,m(ua(U.value[y][p].gap)),1)])):(u(),h("div",nc,"No Data"))],46,Ki)}),128))]))),128))])])]),s("div",sc,[o[54]||(o[54]=s("div",{class:"stats-panel-header"},[s("i",{class:"fas fa-chart-line"}),s("span",null,"Performance Details")],-1)),G.value?(u(),h("div",oc,[s("div",ic,[o[44]||(o[44]=s("span",{class:"stat-label"},"Driver",-1)),s("span",cc,m(G.value.driver),1)]),s("div",lc,[o[45]||(o[45]=s("span",{class:"stat-label"},"Track",-1)),s("span",uc,m(G.value.track),1)]),s("div",dc,[o[46]||(o[46]=s("span",{class:"stat-label"},"Best Lap",-1)),s("span",fc,m(G.value.time),1)]),s("div",hc,[o[47]||(o[47]=s("span",{class:"stat-label"},"Average Lap",-1)),s("span",mc,m(G.value.avgLap),1)]),s("div",vc,[o[48]||(o[48]=s("span",{class:"stat-label"},"Worst Lap",-1)),s("span",gc,m(G.value.worstLap),1)]),s("div",yc,[o[49]||(o[49]=s("span",{class:"stat-label"},"Track Record",-1)),s("span",wc,m(G.value.trackRecord),1)]),s("div",bc,[o[50]||(o[50]=s("span",{class:"stat-label"},"Gap to Record",-1)),s("span",pc,m(G.value.gapToRecord),1)]),s("div",_c,[o[51]||(o[51]=s("span",{class:"stat-label"},"Consistency Range",-1)),s("span",kc,m(G.value.consistency),1)]),s("div",Dc,[o[52]||(o[52]=s("span",{class:"stat-label"},"Total Laps",-1)),s("span",xc,m(G.value.lapCount),1)])])):(u(),h("div",Tc,[...o[53]||(o[53]=[s("div",{style:{"text-align":"center",padding:"60px 20px",color:"var(--text-secondary)"}},[s("i",{class:"fas fa-mouse-pointer",style:{"font-size":"48px",opacity:"0.3","margin-bottom":"16px"}}),s("p",null,"Hover over a cell to see detailed performance stats")],-1)])]))])])]),s("div",Mc,[o[60]||(o[60]=s("div",{class:"legend-title"},"Gap to Track Record:",-1)),s("div",Cc,[s("div",Pc,[o[55]||(o[55]=s("div",{class:"legend-box",style:{background:"linear-gradient(135deg, #10B981, #059669)"}},null,-1)),s("span",null,m((oe.value*.01).toFixed(2))+"s",1)]),s("div",Oc,[o[56]||(o[56]=s("div",{class:"legend-box",style:{background:"linear-gradient(135deg, #FBBF24, #F59E0B)"}},null,-1)),s("span",null,m((oe.value*.05).toFixed(2))+"s",1)]),s("div",Fc,[o[57]||(o[57]=s("div",{class:"legend-box",style:{background:"linear-gradient(135deg, #FB923C, #F97316)"}},null,-1)),s("span",null,m((oe.value*.1).toFixed(2))+"s",1)]),s("div",Yc,[o[58]||(o[58]=s("div",{class:"legend-box",style:{background:"linear-gradient(135deg, #EF4444, #DC2626)"}},null,-1)),s("span",null,m((oe.value*.5).toFixed(2))+"s",1)]),s("div",$c,[o[59]||(o[59]=s("div",{class:"legend-box",style:{background:"linear-gradient(135deg, #B91C1C, #991B1B)"}},null,-1)),s("span",null,m(oe.value.toFixed(2))+"s",1)])])])])):Q("",!0)])]),s("div",Nc,[o[63]||(o[63]=s("h2",{class:"section-title"},[s("span",null,"ðŸ—ºï¸"),Qe(" Regional Analysis ")],-1)),s("div",Ec,[o[62]||(o[62]=s("p",{class:"section-description"}," Explore karting tracks you've visited. Click on markers to see your stats: laps, average speed, fastest lap, sessions, distance driven, and wins. ",-1)),s("div",Lc,[$e(Ya,{"driver-id":n.value||a.value},null,8,["driver-id"])])])])])),(u(),nt(Nt,{to:"body"},[J.value?(u(),h("div",{key:0,class:"modal-overlay",onClick:o[13]||(o[13]=l=>J.value=!1)},[s("div",{class:"modal-content",onClick:o[12]||(o[12]=kt(()=>{},["stop"]))},[s("div",Ac,[o[64]||(o[64]=s("h3",null,"Add Friend",-1)),s("button",{onClick:o[7]||(o[7]=l=>J.value=!1),class:"close-btn","aria-label":"Close modal"}," âœ• ")]),s("div",Wc,[o[66]||(o[66]=s("p",{class:"modal-hint"},"Select a driver to add to your friends list:",-1)),s("div",Hc,[Oa(s("input",{"onUpdate:modelValue":o[8]||(o[8]=l=>ae.value=l),type:"text",placeholder:"Search drivers...",class:"search-input","aria-label":"Search drivers",onKeydown:o[9]||(o[9]=Dt(l=>ae.value="",["escape"]))},null,544),[[Fa,ae.value]]),ae.value?(u(),h("button",{key:0,onClick:o[10]||(o[10]=l=>ae.value=""),onKeydown:o[11]||(o[11]=Dt(l=>ae.value="",["enter"])),class:"clear-search",role:"button","aria-label":"Clear search"}," âœ• ",32)):Q("",!0)]),A.value?(u(),h("div",qc,"Loading drivers...")):Me.value.length===0?(u(),h("div",Rc,[...o[65]||(o[65]=[s("p",null,"No drivers found",-1)])])):(u(),h("div",Ic,[(u(!0),h(S,null,V(Me.value,l=>(u(),h("button",{key:l.id,onClick:y=>ba(l.id),class:"driver-option","aria-label":`Add ${l.name} as friend`},[s("div",Sc,m(l.name.charAt(0)),1),s("div",Qc,m(l.name),1)],8,Bc))),128))]))])])])):Q("",!0)]))]))}}),Kc=Et(Gc,[["__scopeId","data-v-bcfa30f7"]]);export{Kc as default};
