# SonarCloud Configuration for Karting Dashboard Project
# https://sonarcloud.io

sonar.organization=themaksoo
sonar.projectKey=TheMaksoo_karting
sonar.projectName=Karting Dashboard
sonar.projectVersion=1.0.0

# Source encoding
sonar.sourceEncoding=UTF-8

# ========================================
# Coverage Reports (All Languages)
# ========================================

# PHP Backend (Laravel) - Clover format from PHPUnit/Pest
sonar.php.coverage.reportPaths=portal/backend/coverage/clover.xml
sonar.php.tests.reportPath=portal/backend/test-results.xml

# TypeScript/Vue Frontend - LCOV format from Vitest
sonar.javascript.lcov.reportPaths=portal/frontend/coverage/lcov.info

# Python Data Importer - Cobertura format from pytest-cov
sonar.python.coverage.reportPaths=data-importer/scripts/coverage.xml

# ========================================
# Source Files (ONLY actual source code)
# ========================================
sonar.sources=portal/backend/app,portal/frontend/src,data-importer/scripts

# ========================================
# Test Files
# ========================================
sonar.tests=portal/backend/tests,portal/frontend/src/stores/__tests__,portal/frontend/src/services/__tests__,data-importer/scripts/tests
sonar.test.inclusions=**/*Test.php,**/*.spec.ts,**/test_*.py

# ========================================
# Exclusions (CRITICAL - exclude everything that shouldn't be analyzed)
# ========================================

# Exclude from analysis completely
sonar.exclusions=\
  **/node_modules/**,\
  **/vendor/**,\
  **/.venv/**,\
  **/dist/**,\
  **/coverage/**,\
  **/storage/**,\
  **/bootstrap/cache/**,\
  **/*.min.js,\
  **/*.min.css,\
  **/public/build/**,\
  **/artifacts/**,\
  **/.github/**,\
  **/eml-samples/**,\
  **/*.eml,\
  **/*.csv,\
  **/*.json,\
  **/*.xml,\
  **/*.lock,\
  **/*.txt,\
  **/*.md,\
  **/*.html,\
  **/check-*.php,\
  **/debug-*.php,\
  **/test-*.php,\
  **/process-all-files.php,\
  **/show-tracks.php,\
  **/errors.txt

# Exclude from duplication detection
sonar.cpd.exclusions=\
  **/tests/**,\
  **/*.spec.ts,\
  **/test_*.py,\
  **/*Test.php,\
  **/migrations/**

# Exclude from coverage
sonar.coverage.exclusions=\
  **/tests/**,\
  **/*.spec.ts,\
  **/test_*.py,\
  **/*Test.php,\
  **/database/migrations/**,\
  **/database/seeders/**,\
  **/database/factories/**,\
  **/config/**,\
  **/bootstrap/**,\
  **/routes/**

# ========================================
# Language-specific settings
# ========================================

# PHP settings
sonar.php.file.suffixes=php

# TypeScript/JavaScript settings  
sonar.typescript.file.suffixes=.ts,.tsx
sonar.javascript.file.suffixes=.js,.jsx,.vue

# Python settings
sonar.python.file.suffixes=py

# ========================================
# Quality Gates
# ========================================
sonar.qualitygate.wait=true
